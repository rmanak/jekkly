<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="description" content="description" />
<meta name="keywords" content="keywords" />
<meta name="author" content="author" />
<link rel="stylesheet" type="text/css" href="pagestyle.css" />
<title>Arman Akbarian's Homepage</title>
<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>

<body>
<div class="page">
  <div class="page2">
     <div style="width:100%;height:1px;font-family: Tahoma; font-size: 1pt;"></div>
     <div  class ="header">
		
	     <div class="title">

			Arman Akbarian
			<div class="subtitle">UNIVERSITY OF BRITISH COLUMBIA <br /> PHYSICS &amp; ASTRONOMY DEPT. </div>
	</div> <!-- End of title -->
		<div class="sidebar">
         	<div class="sider">
               <p><a href="Home.html">Home <img src="img/home.svg" width="11px" /></a>
<a href="Research.html">Research <img src="img/beaker.svg" width="11px" /></a>
<a href="Publications.html">Publications <img src="img/pencil.svg" width="11px" /></a>
<a target="_blank" href="http://laplace.phas.ubc.ca/">Group Page <img style="margin-left:1px;" src="img/external-link.svg" alt="" align="bottom" /> <img src="img/people.svg" width="11px" /></a>
<a href="Contact.html">Contact <img src="img/envelope-closed.svg" width="11px" /></a>
<a href="CV.html">CV <img src="img/person.svg" width="11px" /></a></p>

<hr />

<p><a href="Links.html">Links <img src="img/link.svg" width="11px" /></a>
<a href="Learn-By-Examples.html">Programming <img src="img/code.svg" width="11px"/></a>
<a target="_blank" href="FD_doc">FD Toolkit <img style="margin-left:1px;" src="img/external-link.svg" alt="" align="bottom" /> <img src="img/graph.svg" width="11px" /></a>
<a target="_blank" href="sg">Web Template <img style="margin-left:1px;" src="img/external-link.svg" alt="" align="bottom" /> <img src="img/globe.svg" width="11px" /></a>
<a href="http://rmanak.github.io/notes">Miscellany <img src="img/layers.svg" width="11px" /></a></p>

             </div>
         </div> <!--End of Sidebar -->


     </div> <!-- end header -->
	
     <!--This line is for future use -->   <div style="text-align:center; padding-top:10px; padding-bottom:10px;"></div>
	      
     <!--This line is for compatibility issues --> <div style="width:100%;height:5px;font-family: Tahoma; font-size: 1pt;"></div>
     <!--in class page2 -->
     <div class="postandside">
		        <div class="content">
            <div class="post">
              <style type="text/css">
<!--
.Identifier { color: #008b8b; }
.Special { color: #6a5acd; }
pre {  color: #000000; background-color: #ffffff; }
body {  color: #000000; background-color: #ffffff; }
.PreProc { color: #a020f0; }
.Comment { color: #0000ff; }
.Statement { color: #a52a2a; font-weight: bold; }
.Constant { color: #ff00ff; }
-->
</style>
<pre>
<span class="PreProc">#!/usr/bin/perl -w</span>

<span class="Comment">#############################################</span>
<span class="Comment"># This document explains Perl facilities for</span>
<span class="Comment"># file testing, directories etc...</span>
<span class="Comment"># AAK: Last Modification</span>
<span class="Comment"># Tue Sep 11 22:07:39 PDT 2012</span>
<span class="Comment"># ###########################################</span>

<span class="Statement">use </span><span class="Constant">5.010</span>;

<span class="Identifier">$filename</span> = <span class="Constant">&quot;</span><span class="Constant">mydata.dat</span><span class="Constant">&quot;</span>;

<span class="Statement">if</span> (<span class="Statement">-e</span> <span class="Identifier">$filename</span>) {
   <span class="Statement">warn</span> <span class="Constant">&quot;</span><span class="Constant">file </span><span class="Identifier">$filename</span><span class="Constant"> exists!</span><span class="Constant">&quot;</span>;
   <span class="Identifier">$mdpopt</span>=<span class="Constant">0</span>;
}
<span class="Statement">else</span>
{
   <span class="Statement">open</span> <span class="Identifier">OUTPUT1</span>, <span class="Constant">&quot;</span><span class="Constant">&gt;mydata.dat</span><span class="Constant">&quot;</span>;
   <span class="Identifier">$mdpopt</span>=<span class="Constant">1</span>;
}

<span class="Comment">#flag -e checks if file or directory exists:</span>
<span class="Comment">#other useful flags are:</span>
<span class="Comment"># -r -R file readable by effective/real user</span>
<span class="Comment"># -w -W file writable &quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;</span>
<span class="Comment"># -x -X &quot;&quot;&quot;&quot; exectutable &quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;</span>
<span class="Comment"># -o -O &quot;&quot;&quot;&quot; owened &quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;</span>
<span class="Comment"># -z file exists with zero size</span>
<span class="Comment"># -s file exists with nonzero size (actually returns file size)</span>
<span class="Comment"># -d entry is a directory</span>
<span class="Comment"># -f entry is a plain file</span>
<span class="Comment"># -M returns modification age (in days)</span>
<span class="Statement">if</span> (<span class="Statement">-M</span> <span class="Identifier">$filename</span> &gt; <span class="Constant">20</span>) {<span class="Statement">say</span> <span class="Constant">&quot;</span><span class="Constant">pretty old file!</span><span class="Constant">&quot;</span>;}
<span class="Comment"># -A access age (in days)</span>
<span class="Comment"># -T file looks like a text file</span>
<span class="Comment"># -B file looks like a binary file</span>

<span class="Comment">#you can combine several attributes using and:</span>

<span class="Statement">if</span> ( <span class="Statement">-r</span> <span class="Identifier">$filename</span> <span class="Statement">and</span> <span class="Statement">-w</span> <span class="Identifier">$filename</span> ) { <span class="Statement">print</span> <span class="Constant">&quot;</span><span class="Constant">both readable and writable</span><span class="Special">\n</span><span class="Constant">&quot;</span>;}

<span class="Comment">#or you can stack them (need perl v 5.010:)</span>

<span class="Statement">use </span><span class="Constant">5.010</span>;
<span class="Statement">if</span> (<span class="Statement">-w</span> <span class="Statement">-r</span> <span class="Identifier">$filename</span>) { <span class="Statement">say</span><span class="Constant">&quot;</span><span class="Constant"> stacking example</span><span class="Constant">&quot;</span>;}

<span class="Comment">#to get pretty much everything about a file, use stat</span>
<span class="Comment">#which returns almost everything that stat command returns in Unix:</span>

<span class="Identifier">@fileinfo</span> = <span class="Statement">stat</span>(<span class="Identifier">$filename</span>);

<span class="Statement">say</span> <span class="Constant">&quot;</span><span class="Identifier">@fileinfo</span><span class="Constant">&quot;</span>;

<span class="Statement">my</span> <span class="Identifier">$timestamp</span> = <span class="Constant">0</span>;
<span class="Statement">my</span> <span class="Identifier">$date</span> = <span class="Statement">localtime</span> <span class="Identifier">$timestamp</span>;

<span class="Statement">say</span> <span class="Constant">&quot;</span><span class="Constant">the beginning of time for computer is: </span><span class="Identifier">$date</span><span class="Constant">&quot;</span>;

<span class="Identifier">$timestamp</span> = <span class="Constant">40</span>*<span class="Constant">3.14E+7</span>;
<span class="Statement">my</span> <span class="Identifier">@date</span> = <span class="Statement">localtime</span> <span class="Identifier">$timestamp</span>;

<span class="Statement">say</span> <span class="Identifier">$date</span>[<span class="Constant">0</span>], <span class="Identifier">$date</span>[<span class="Constant">1</span>];
<span class="Statement">say</span> <span class="Constant">&quot;</span><span class="Identifier">@date</span><span class="Constant">&quot;</span>;

<span class="Comment">#chdir changes the &quot;working directory&quot; to the desired location:</span>
<span class="Comment"># &quot;ENV&quot; is a hash that stores the enviroument variables</span>
<span class="Comment"># See hash section of these files for more detail</span>
<span class="Statement">say</span> <span class="Constant">&quot;</span><span class="Constant">your home is: </span><span class="Identifier">$ENV</span><span class="Constant">{HOME}</span><span class="Constant">&quot;</span>;
<span class="Statement">chdir</span> <span class="Constant">&quot;</span><span class="Identifier">$ENV</span><span class="Constant">{HOME}</span><span class="Constant">&quot;</span> <span class="Statement">or</span> <span class="Statement">die</span> <span class="Constant">&quot;</span><span class="Constant">cannot chdir to </span><span class="Identifier">$ENV</span><span class="Constant">{HOME}: </span><span class="Identifier">$!</span><span class="Constant">&quot;</span>;

<span class="Comment">#globbing is done by use of glob operator:</span>

<span class="Comment">#following will return all of the files in current working directory into</span>
<span class="Comment">#the array all_files:</span>
<span class="Statement">my</span> <span class="Identifier">@all_files</span> = <span class="Statement">glob</span> <span class="Constant">&quot;</span><span class="Constant">*</span><span class="Constant">&quot;</span>;
<span class="Statement">say</span> <span class="Constant">&quot;</span><span class="Identifier">@all_files</span><span class="Constant">&quot;</span>;

<span class="Statement">if</span> (<span class="Identifier">$frt</span> = <span class="Statement">glob</span> <span class="Constant">&quot;</span><span class="Constant">*.f</span><span class="Constant">&quot;</span>) {<span class="Statement">say</span> <span class="Constant">&quot;</span><span class="Constant">you got some fortran file here!</span><span class="Constant">&quot;</span>;}
<span class="Statement">else</span> { <span class="Statement">say</span> <span class="Constant">&quot;</span><span class="Constant">no .f file found</span><span class="Constant">&quot;</span>;}

<span class="Comment">#directory handles are the same as file handles, you open a directory </span>
<span class="Comment">#and work with it:</span>

<span class="Statement">my</span> <span class="Identifier">$dir_name</span> = <span class="Constant">&quot;</span><span class="Constant">/etc</span><span class="Constant">&quot;</span>;
<span class="Statement">opendir</span> <span class="Identifier">ETC</span>, <span class="Identifier">$dir_name</span> <span class="Statement">or</span> <span class="Statement">die</span> <span class="Constant">&quot;</span><span class="Constant">cannot open </span><span class="Identifier">$dir_name</span><span class="Constant">: </span><span class="Identifier">$!</span><span class="Constant">&quot;</span>;
<span class="Statement">foreach</span> <span class="Identifier">$file</span> (<span class="Statement">readdir</span> <span class="Identifier">ETC</span>) {
   <span class="Statement">print</span> <span class="Constant">&quot;</span><span class="Constant">file </span><span class="Identifier">$file</span><span class="Constant"> is in </span><span class="Identifier">$dir_name</span><span class="Special">\n</span><span class="Constant">&quot;</span>;
}
<span class="Statement">closedir</span> <span class="Identifier">ETC</span>;

<span class="Comment">#using unlink you can delete files in Perl:</span>

<span class="Identifier">$nfd</span> = <span class="Statement">unlink</span> <span class="Constant">&quot;</span><span class="Constant">filetmp29382</span><span class="Constant">&quot;</span>, <span class="Constant">&quot;</span><span class="Constant">filetmp3827321</span><span class="Constant">&quot;</span>, <span class="Constant">&quot;</span><span class="Constant">filetmp3827172</span><span class="Constant">&quot;</span>;
<span class="Comment">#the return of unlink is number of files successfully deleted</span>

<span class="Statement">say</span> <span class="Constant">&quot;</span><span class="Constant">I deleted </span><span class="Identifier">$nfd</span><span class="Constant"> files</span><span class="Constant">&quot;</span>;

<span class="Comment">#renaming a file is as following:</span>

<span class="Statement">rename</span> <span class="Constant">&quot;</span><span class="Constant">filetmp28321</span><span class="Constant">&quot;</span>, <span class="Constant">&quot;</span><span class="Constant">filetmpds23721</span><span class="Constant">&quot;</span> <span class="Statement">or</span> <span class="Statement">warn</span> <span class="Constant">&quot;</span><span class="Constant">unable to rename: </span><span class="Identifier">$!</span><span class="Constant">&quot;</span>;

<span class="Comment">#link and symlink are to create hard and symbolic links to a file:</span>
<span class="Comment"># link &quot;linkname&quot;, &quot;targetfile&quot;;</span>
<span class="Comment"># symlink &quot;linkname&quot;. &quot;targetfile&quot;;</span>

<span class="Comment">#using mkdir you can create directory:</span>

<span class="Statement">chdir</span> <span class="Identifier">$ENV</span>{HOME};
<span class="Statement">mkdir</span> <span class="Constant">&quot;</span><span class="Constant">newdirtmp123</span><span class="Constant">&quot;</span>, <span class="Constant">0755</span> <span class="Statement">or</span> <span class="Statement">warn</span> <span class="Constant">&quot;</span><span class="Constant">cannot create directory: </span><span class="Identifier">$!</span><span class="Constant">&quot;</span>;

<span class="Comment"># 0755 is the initial permission of the newly created directory (unix standards)</span>

<span class="Comment">#and change of permission is as following:</span>

<span class="Comment">#chmod 0755, &quot;file1&quot;, &quot;file2&quot;;</span>

<span class="Comment">#to run other programs in perl one way is to use system followed by unix command:</span>

<span class="Statement">system</span> <span class="Constant">&quot;</span><span class="Constant">date</span><span class="Constant">&quot;</span>;
<span class="Statement">system</span> <span class="Constant">&quot;</span><span class="Constant">ls -l </span><span class="Identifier">$ENV</span><span class="Constant">{HOME}</span><span class="Constant">&quot;</span>;

<span class="Comment">#you can also send a program to background and let the script keep running:</span>
<span class="Comment">#using standard &amp; at the end:</span>

<span class="Comment"># system &quot;some_program_that_takes_log &amp;&quot;;</span>

<span class="Comment">#you can also run other scripts:</span>

<span class="Statement">system</span> <span class="Constant">&quot;</span><span class="Constant">somescript</span><span class="Constant">&quot;</span>;

<span class="Comment">#you can also use the backquotes similar to unix standard backquote</span>
<span class="Comment">#to capture the output of a program as argument:</span>
<span class="Comment">#the only difference is that perl's `` will also return \n at the end</span>
<span class="Comment">#so it is better to chomp it:</span>

<span class="Statement">chomp</span> (<span class="Statement">my</span> <span class="Identifier">$time</span> = <span class="Statement">`</span><span class="Constant">date</span><span class="Statement">`</span>);
<span class="Statement">say</span> <span class="Identifier">$time</span>;

<span class="Comment">#if the returning variable is an array, then you can have various lines:</span>

<span class="Identifier">@processes</span> =<span class="Statement">`</span><span class="Constant">ps</span><span class="Statement">`</span>;

<span class="Statement">foreach</span> <span class="Identifier">$i</span> (<span class="Identifier">@processes</span>) {
   <span class="Statement">print</span> <span class="Identifier">$i</span>;
}

<span class="Comment">#and you can use I/O of a command as filehandle:</span>

<span class="Statement">open</span> <span class="Identifier">DT</span>, <span class="Constant">&quot;</span><span class="Constant">date|</span><span class="Constant">&quot;</span> <span class="Statement">or</span> <span class="Statement">die</span> <span class="Constant">&quot;</span><span class="Constant">cannot pipe from date :</span><span class="Identifier">$!</span><span class="Constant">&quot;</span>;
<span class="Statement">open</span> <span class="Identifier">MP</span>, <span class="Constant">&quot;</span><span class="Constant">somescript|</span><span class="Constant">&quot;</span> <span class="Statement">or</span> <span class="Statement">warn</span> <span class="Constant">&quot;</span><span class="Constant">cannot pipe from somescript :</span><span class="Identifier">$!</span><span class="Constant">&quot;</span>;
<span class="Statement">open</span> <span class="Identifier">AP</span>, <span class="Constant">&quot;</span><span class="Constant">|anotherscript</span><span class="Constant">&quot;</span> <span class="Statement">or</span> <span class="Statement">warn</span> <span class="Constant">&quot;</span><span class="Constant">cannot pipe to anotherscirpt: </span><span class="Identifier">$!</span><span class="Constant">&quot;</span>;
<span class="Identifier">$x</span>=<span class="Statement">`</span><span class="Constant">somescript</span><span class="Statement">`</span>;
<span class="Statement">print</span> <span class="Identifier">$x</span>;

<span class="Comment">#and you can now read and write from/to the file handles:</span>

<span class="Statement">print</span> <span class="Identifier">AP</span> <span class="Constant">&quot;</span><span class="Constant">this will be sent to anotherscript if exist</span><span class="Constant">&quot;</span> <span class="Statement">or</span> <span class="Statement">warn</span> <span class="Constant">&quot;</span><span class="Constant">anotherscript is not available</span><span class="Constant">&quot;</span>;
<span class="Statement">my</span> <span class="Identifier">$now</span> = <span class="Identifier">&lt;DT&gt;</span>;
<span class="Statement">print</span> <span class="Identifier">$now</span>;


</pre>

		      <div style="clear: both;"></div>
	         </div>
		      <hr />
	         <div class ="date">last update:   , </div>
	    <div class="footer">
           <p><a href="Home.html">Home</a>|<a href="Research.html">Research</a>|<a href="Contact.html">Contact</a>|<a href="Links.html">Links</a>|<a href="Misc.html">Misc</a>|<a href="sg">Template</a></p>

      </div>  
	    <div style="clear: both;">&nbsp;</div>
        </div> <!-- end content -->
	<!-- in class postandside -->

                 <!--in class postandside-->   
         <!--this line is for compatibility issues --><div style="clear: both;">&#160;</div> <!--Displacement --> 
     </div> <!--End of post and side -->

     <!-- in class page2 -->
     <div style="clear: both;">&nbsp;</div>
  </div> <!--End of Page2 -->
     <div style="clear: both;">&nbsp;</div>

</div> <!-- End of page -->
<!--this is end of the file -->
<!-- ~~~ This content is generated using sg web template ~~-->
<!-- ~~~ For more information visit: http://laplace.physics.ubc.ca/People/arman/sg ~~ -->
</body>
</html>
