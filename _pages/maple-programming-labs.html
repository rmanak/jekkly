<html>
<title>Physics 210 UBC/Fall 2014 - maple-programming-labs</title>
<head>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<link rel="stylesheet" type="text/css" href="/css/notes-style.css">
<link rel="stylesheet" type="text/css" href="notes-style.css">
</head>
<body>
<p></p>

<h1><a href="../index.html">Physics 210</a> Maple Programming Labs</h1>

<div class="table_of_contents">
<!-- ~~~~~~~~~~~~~~~~~~~~ BEGIN TABLE OF CONTENTS ~~~~~~~~~~~~~~~~~~~~ -->
<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Table of contents was automatically generated by program: pyhat.py.
Generation date/time: 2014-10-09 20:23:07
For more information: visit www.ferg.org/pyhat
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
<a id="contents_item_0"></a>
<h2>Table of Contents</h2>
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td width="4%">&nbsp;</td><td width="4%">&nbsp;</td><td width="4%">&nbsp;</td><td width="4%">&nbsp;</td><td width="4%">&nbsp;</td><td>&nbsp;</td>
</tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">1</a> <a href="#contents_item_1" id="table_of_contents_1">Maple source code files covered in these labs</a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">2</a> <a href="#contents_item_2" id="table_of_contents_2">Maple programming documentation</a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">3</a> <a href="#contents_item_3" id="table_of_contents_3">Maple programming setup</a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">4</a> <a href="#contents_item_4" id="table_of_contents_4">The <code>read</code> command</a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">5</a> <a href="#contents_item_5" id="table_of_contents_5">Working through these notes</a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">6</a> <a href="#contents_item_6" id="table_of_contents_6">Displaying procedure definitions: the <code>op</code> command</a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">7</a> <a href="#contents_item_7" id="table_of_contents_7">Type checking</a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">8</a> <a href="#contents_item_8" id="table_of_contents_8">Syntax errors</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">8.1</a> <a href="#contents_item_8.1" id="table_of_contents_8.1">EXERCISE: Write a simple procedure.</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">8.2</a> <a href="#contents_item_8.2" id="table_of_contents_8.2">EXERCISE: Write another simple procedure.</a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">9</a> <a href="#contents_item_9" id="table_of_contents_9">EXERCISE: Debug the definition of <code>err1</code></a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">10</a> <a href="#contents_item_10" id="table_of_contents_10">The <code>print</code> statement</a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">11</a> <a href="#contents_item_11" id="table_of_contents_11">Selection: the <code>if</code> statement</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">11.1</a> <a href="#contents_item_11.1" id="table_of_contents_11.1">The "else-less" <code>if</code> statement</a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">12</a> <a href="#contents_item_12" id="table_of_contents_12">Boolean operators and expressions</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">12.1</a> <a href="#contents_item_12.1" id="table_of_contents_12.1">Relational Operators</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">12.2</a> <a href="#contents_item_12.2" id="table_of_contents_12.2">Logical Operators</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">12.3</a> <a href="#contents_item_12.3" id="table_of_contents_12.3">Boolean-valued (logical) expressions</a></div></td></tr>
<tr><td colspan="3">&nbsp;</td><td colspan="3"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">12.3.1</a> <a href="#contents_item_12.3.1" id="table_of_contents_12.3.1">Some trickier examples of Boolean expressions</a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">13</a> <a href="#contents_item_13" id="table_of_contents_13">Sample procedures using <code>if</code> statements</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">13.1</a> <a href="#contents_item_13.1" id="table_of_contents_13.1">myif: Simple <code>if-then-else</code> with no type checking</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">13.2</a> <a href="#contents_item_13.2" id="table_of_contents_13.2">myif1: Simple <code>if-then-else</code> with type checking</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">13.3</a> <a href="#contents_item_13.3" id="table_of_contents_13.3">myif2: <code>if-then-else</code> with more complicated test</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">13.4</a> <a href="#contents_item_13.4" id="table_of_contents_13.4">myif3: Simple <code>if-then-elif-else</code></a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">14</a> <a href="#contents_item_14" id="table_of_contents_14">EXERCISE: Writing basic Maple procedures</a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">15</a> <a href="#contents_item_15" id="table_of_contents_15">EXERCISE: Locating and repairing syntax errors in <code>if</code> statements</a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">16</a> <a href="#contents_item_16" id="table_of_contents_16">Sample solutions to exercises from previous lab</a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">17</a> <a href="#contents_item_17" id="table_of_contents_17">Testing Maple procedures</a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">18</a> <a href="#contents_item_18" id="table_of_contents_18">Important: Change of setup</a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">19</a> <a href="#contents_item_19" id="table_of_contents_19">Global and local variables</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">19.1</a> <a href="#contents_item_19.1" id="table_of_contents_19.1">Global variables</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">19.2</a> <a href="#contents_item_19.2" id="table_of_contents_19.2">Local variables: the <code>local</code> statement</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">19.3</a> <a href="#contents_item_19.3" id="table_of_contents_19.3">Implicit declaration of global and local variables</a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">20</a> <a href="#contents_item_20" id="table_of_contents_20">Important: Change of setup</a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">21</a> <a href="#contents_item_21" id="table_of_contents_21">Iteration (looping): the <code>for</code> statement</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">21.1</a> <a href="#contents_item_21.1" id="table_of_contents_21.1">Simple form</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">21.2</a> <a href="#contents_item_21.2" id="table_of_contents_21.2">General form</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">21.3</a> <a href="#contents_item_21.3" id="table_of_contents_21.3">Sample procedures that use <code>for</code> statements</a></div></td></tr>
<tr><td colspan="3">&nbsp;</td><td colspan="3"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">21.3.1</a> <a href="#contents_item_21.3.1" id="table_of_contents_21.3.1">myfor1: Most basic form of <code>for</code></a></div></td></tr>
<tr><td colspan="3">&nbsp;</td><td colspan="3"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">21.3.2</a> <a href="#contents_item_21.3.2" id="table_of_contents_21.3.2">myfor2: Uses negative loop increment</a></div></td></tr>
<tr><td colspan="3">&nbsp;</td><td colspan="3"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">21.3.3</a> <a href="#contents_item_21.3.3" id="table_of_contents_21.3.3">myfor3: Uses loop increment of 3</a></div></td></tr>
<tr><td colspan="3">&nbsp;</td><td colspan="3"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">21.3.4</a> <a href="#contents_item_21.3.4" id="table_of_contents_21.3.4">myfactorial: Computes n!</a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">22</a> <a href="#contents_item_22" id="table_of_contents_22">The <code>error</code> statement</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">22.1</a> <a href="#contents_item_22.1" id="table_of_contents_22.1">error_demo: Example procedure that uses the <code>error</code> statement</a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">23</a> <a href="#contents_item_23" id="table_of_contents_23">Maple arrays I: One dimensional arrays</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">23.1</a> <a href="#contents_item_23.1" id="table_of_contents_23.1">Defining 1D arrays: The <code>Array</code> command.</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">23.2</a> <a href="#contents_item_23.2" id="table_of_contents_23.2">Accessing elements of a 1D array.</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">23.3</a> <a href="#contents_item_23.3" id="table_of_contents_23.3">Initializing 1D arrays with arbitrary values.</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">23.4</a> <a href="#contents_item_23.4" id="table_of_contents_23.4">Initializing 1D arrays with a constant value.</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">23.5</a> <a href="#contents_item_23.5" id="table_of_contents_23.5">Out-of-range indexes.</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">23.6</a> <a href="#contents_item_23.6" id="table_of_contents_23.6">A one-dimensional array is not a list and vice versa.</a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">24</a> <a href="#contents_item_24" id="table_of_contents_24">myifC revisited</a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">25</a> <a href="#contents_item_25" id="table_of_contents_25">EXERCISES: Using <code>for</code> statements</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">25.1</a> <a href="#contents_item_25.1" id="table_of_contents_25.1">EXERCISE 1: <code>mysum</code></a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">25.2</a> <a href="#contents_item_25.2" id="table_of_contents_25.2">EXERCISE 2: <code>tmyifC</code></a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">26</a> <a href="#contents_item_26" id="table_of_contents_26">Free time to work on homework, discuss term projects</a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">27</a> <a href="#contents_item_27" id="table_of_contents_27">Sample solution to the <code>mysum</code> exercise from previous lab</a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">28</a> <a href="#contents_item_28" id="table_of_contents_28">Important: change of setup</a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">29</a> <a href="#contents_item_29" id="table_of_contents_29">The <code>trace</code> statement: tracing execution of a procedure</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">29.1</a> <a href="#contents_item_29.1" id="table_of_contents_29.1">Remark: Commenting-out code</a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">30</a> <a href="#contents_item_30" id="table_of_contents_30">Sample procedures that manipulate lists.</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">30.1</a> <a href="#contents_item_30.1" id="table_of_contents_30.1">The NULL sequence and empty list.</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">30.2</a> <a href="#contents_item_30.2" id="table_of_contents_30.2">GROUP EXERCISE: Implementing <code>tladd</code> and <code>ladd</code></a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">30.3</a> <a href="#contents_item_30.3" id="table_of_contents_30.3"><code>lpair</code> and <code>ljoin</code></a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">31</a> <a href="#contents_item_31" id="table_of_contents_31">Maple arrays 2: Two dimensional arrays</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">31.1</a> <a href="#contents_item_31.1" id="table_of_contents_31.1">Defining 2D arrays: The <code>Array</code> command.</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">31.2</a> <a href="#contents_item_31.2" id="table_of_contents_31.2">Initializing 2D arrays with arbitrary values</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">31.3</a> <a href="#contents_item_31.3" id="table_of_contents_31.3">Accessing elements of a 2D array</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">31.4</a> <a href="#contents_item_31.4" id="table_of_contents_31.4">Initializing 2D arrays with a constant value</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">31.5</a> <a href="#contents_item_31.5" id="table_of_contents_31.5">Out-of-range indexes.</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">31.6</a> <a href="#contents_item_31.6" id="table_of_contents_31.6">A two-dimensional array is not a list-of-lists and vice versa.</a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">32</a> <a href="#contents_item_32" id="table_of_contents_32">Examples of procedures that create and manipulate arrays</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">32.1</a> <a href="#contents_item_32.1" id="table_of_contents_32.1"><code>V_squares</code>: Procedure that creates and manipulates a 1D array</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">32.2</a> <a href="#contents_item_32.2" id="table_of_contents_32.2"><code>A_ij_sum</code>: Procedure that creates and manipulates a 2D array</a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">33</a> <a href="#contents_item_33" id="table_of_contents_33">The <code>printf</code> statement</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">33.1</a> <a href="#contents_item_33.1" id="table_of_contents_33.1"><code>printf</code>: Syntax</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">33.2</a> <a href="#contents_item_33.2" id="table_of_contents_33.2"><code>printf</code>: Semantics</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">33.3</a> <a href="#contents_item_33.3" id="table_of_contents_33.3"><code>printf</code>: Example usage</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">33.4</a> <a href="#contents_item_33.4" id="table_of_contents_33.4"><code>printf</code>: Example of procedure that uses printf</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">33.5</a> <a href="#contents_item_33.5" id="table_of_contents_33.5"><code>printf</code>: Concluding remarks</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">33.6</a> <a href="#contents_item_33.6" id="table_of_contents_33.6"><code>printf</code>: The Unix command-line version (aside!)</a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">34</a> <a href="#contents_item_34" id="table_of_contents_34">Increasing the number of array elements that Maple will display inline</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">34.1</a> <a href="#contents_item_34.1" id="table_of_contents_34.1">The <code>interface</code> command</a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">35</a> <a href="#contents_item_35" id="table_of_contents_35">The Maple initialization file: <code>~/.mapleinit</code></a></div></td></tr>
<tr><td colspan="1">&nbsp;</td><td colspan="5"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">36</a> <a href="#contents_item_36" id="table_of_contents_36">Introduction to Maple's plotting facilities</a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">36.1</a> <a href="#contents_item_36.1" id="table_of_contents_36.1">EXERCISE: <code>lprod</code></a></div></td></tr>
<tr><td colspan="2">&nbsp;</td><td colspan="4"><div style="text-align:left; text-indent:-3em; margin-left:3em; font-family: sans-serif"><a href="#contents_item_0">36.2</a> <a href="#contents_item_36.2" id="table_of_contents_36.2">EXERCISE (Out of lab): <code>myplot3</code></a></div></td></tr>
</table>
<!-- ~~~~~~~~~~~~~~~~~~~~ _END_ TABLE OF CONTENTS ~~~~~~~~~~~~~~~~~~~~ -->
</div><h2><span class="contents_item"><a href="#table_of_contents_1" id="contents_item_1">
1</a>
</span>Maple source code files covered in these labs</h2>

<ul>
<li><a href="http://laplace.phas.ubc.ca/Students/phys210/maple-code/"><strong>EXAMPLE PROCEDURES AND SCRIPTS</strong></a></li>
<li><a href="http://laplace.phas.ubc.ca/Students/phys210/maple-code-solns/"><strong>EXERCISE SOLUTIONS</strong></a></li>
</ul>

<h2><span class="contents_item"><a href="#table_of_contents_2" id="contents_item_2">
2</a>
</span>Maple programming documentation</h2>

<ul>
<li><p><a href="http://laplace.phas.ubc.ca/210/Doc/maple/ProgrammingGuide7.pdf">Maple 7 Programming Guide</a> (large PDF file, 642 pages)</p>

<ul><li>Structure/contents are different than more recent guide below</li>
<li>Chapters 1 and 2 particularly useful for novice programmers</li>
<li>Note: Dates from 2001 so some features may be changed/deprecated,
but for the most part it won't lead you astray</li></ul></li>
<li><p><a href="http://www.maplesoft.com/view.aspx?SF=131923/432652/ProgrammingGuide.pdf">Maple Programming Guide</a> (Even larger PDF file, 702 pages)</p>

<ul><li><a href="file://home/phys210/maple/UserManual.pdf">Local copy</a> 
(the link will only work in the lab)</li>
<li>This is a good <em>reference</em> for full details of topics covered
in class/labs, as well as much, much more.</li>
<li>The PDF file is very large, so it takes some time to download
even with a fast network: you may want to save a copy if you're
working at home</li></ul></li>
<li><p><a href="http://www.maplesoft.com/view.aspx?SF=131922/432650/UserManual.pdf">Maple User's Manual</a></p>

<ul><li><a href="file://home/phys210/maple/UserManual.pdf">Local copy</a>
(the link will only work in the lab)</li></ul></li>
</ul>

<h2><span class="contents_item"><a href="#table_of_contents_3" id="contents_item_3">
3</a>
</span>Maple programming setup</h2>

<p>Open a terminal window. Open a browser and point it to these notes.</p>

<p>Create the subdirectory <code>maplepgm</code> in your home directory, and cd to it.</p>

<pre><code>% cd
% mkdir maplepgm
% cd maplepgm
% pwd
/home/phys210f/maplepgm
</code></pre>

<p>Copy all of the files in the directory <code>~phys210/maplepgm</code>.  </p>

<p>Recall (or note!) that
the <code>*</code> (star/asterisk) "globs", or "expands" to the names of all of the 
files in <code>~phys210/maplepgm</code>, and that <code>.</code>
means the working directory, as usual</p>

<pre><code>% cp ~phys210/maplepgm/* .
</code></pre>

<p>Get a listing of the files:</p>

<pre><code>% ls
err1  errif  index.html  procs  tprocs
</code></pre>

<p><strong>NOTE</strong></p>

<blockquote>
  <p>The contents of these and other source files that we will cover in these
notes are browseable <a href="http://laplace.phas.ubc.ca/Students/phys210/maple-code/"><strong>HERE</strong></a>.</p>
</blockquote>

<p>You can also use <em>cat</em> or <em>more</em> from the terminal window, e.g.</p>

<pre><code>% cat procs

% more procs
</code></pre>

<p>Remember that for <em>more</em>
- <em>Space bar</em> moves forward a page
- <em>b</em> moves back a page
- <em>q</em> quits</p>

<p>Look at the contents of <code>procs</code> using your browser or from the
command line with <code>more</code></p>

<p>Ensure that the working directory <code>~/maplepgm</code>, and <em>start xmaple in the 
background</em></p>

<pre><code>% pwd
/home/phys210f/maplepgm

% xmaple &amp;
</code></pre>

<h2><span class="contents_item"><a href="#table_of_contents_4" id="contents_item_4">
4</a>
</span>The <code>read</code> command</h2>

<p>The Maple <code>read</code> command is completely analogous to the 
gnuplot <code>load</code> command: i.e. it redirects Maple's input from the 
interactive prompt to the specified file.</p>

<p>Read in the procedure definitions in <code>procs</code>.</p>

<pre><code>&gt; read procs;
</code></pre>

<p>Because I have ended each procedure definition with a semi-colon, Maple will 
echo the definitions in <code>procs</code> as they are read (and thus defined):</p>

<pre><code>myadd := proc(x, y) x + y end proc
                  .
                  .
                  .
myif3 := proc(x::numeric)
  if 0 &lt; x then 1 elif x &lt; 0 then -1 else 0 end if
end proc
</code></pre>

<h2><span class="contents_item"><a href="#table_of_contents_5" id="contents_item_5">
5</a>
</span>Working through these notes</h2>

<p>The Maple output below is produced by command-line Maple: the
output from xmaple will appear different ("prettier") but has
the same content.</p>

<p>In the following, only type in what follows the Maple prompt, <em>></em></p>

<p>If something happens to your <code>xmaple</code> session, or you accidentally
exit it, restart using</p>

<pre><code>% xmaple &amp;
</code></pre>

<p>from a terminal with working directory <code>~/maplepgm</code>, then reexecute</p>

<pre><code>% read procs;
</code></pre>

<h2><span class="contents_item"><a href="#table_of_contents_6" id="contents_item_6">
6</a>
</span>Displaying procedure definitions: the <code>op</code> command</h2>

<p>Use the <code>op</code> command to see the definition of a procedure</p>

<pre><code>&gt; op(myadd);
    proc(x, y) x + y end proc
</code></pre>

<p>Give myadd a whirl and note the output in each case</p>

<pre><code>&gt; myadd(2, 3);
                               5
&gt; myadd(w, z);
                             w + z

&gt; myadd(sin(x)^2, cos(x)^2);
                             2         2
                       sin(x)  + cos(x)
</code></pre>

<p>Try</p>

<pre><code>&gt; myadd("a", "b");
</code></pre>

<p>What happens?</p>

<p>Does this make any sense?  I.e. is there a situation where
we would want to compute/represent the sum of two strings? (For those 
of you in the know, ignore that fact that some languages use <code>+</code> to 
concatenate strings!)</p>

<h2><span class="contents_item"><a href="#table_of_contents_7" id="contents_item_7">
7</a>
</span>Type checking</h2>

<p>Maple has a notion of the <code>type</code> of expressions (best illustrated
through example, as below).</p>

<p>Maple has a simple and powerful facility to state what type each
argument is expected to be. When a procedure is invoked, the
arguments will be checked from first to last (as they appear 
in the argument list), and if any is of incorrect
type, an error message is output and the procedure immediately
returns</p>

<p>Only the first invalid argument encountered generates an error: if
more that one arg is of the wrong type you may/will have to correct
them one after another.</p>

<p>Look at the definition of <code>myadd1</code></p>

<pre><code>&gt; op(myadd1);
        proc(x::algebraic, y::algebraic) x + y end proc
</code></pre>

<p><strong>IMPORTANT!</strong></p>

<ol>
<li><p>To use Maple's automatic type-checking of arguments, follow 
each and every argument with a double colon (no space between the colons), 
and then the expected type (which can differ from argument to argument).</p></li>
<li><p>We will generally want to have type checking for <em>all</em> arguments. In
this case we are requiring that both of <code>myadd1</code>'s arguments are of 
type <code>algebraic</code>:</p></li>
</ol>

<p><code>myadd1</code> in action:</p>

<pre><code>&gt; myadd1(x, 2*y);
                        x + 2 y

&gt; myadd1("a", "b");
    Error, invalid input: myadd1 expects its 1st argument, x, 
    to be of type algebraic, but received a

&gt; myadd1(diff(sin(x),x), diff(x^4, x));
                                 3
                     cos(x) + 4 x
</code></pre>

<p>Note that in the second invocation Maple doesn't tell us 
<em>what</em> type <code>a</code> is, only that it isn't <code>algebraic</code>. 
is because there are <em>many, many</em> different types in the language 
and virtually every expression (including a string like <code>"a"</code>) is a 
member of more than one type.  However,
it can <em>always</em> decide whether or not a given expression <em>is</em> or 
<em>is not</em> an instance of a specific type.</p>

<p>Here's an example where we supply a list, which is <em>not</em> of type
algebraic, as the first argument to <code>myadd1</code></p>

<pre><code>&gt; myadd1([a, b], 2);
    Error, invalid input: myadd1 expects its 1st argument, x, 
    to be of type algebraic, but received [a, b]
</code></pre>

<p>Here's a version of <code>myadd</code> which requires <code>numeric</code> arguments</p>

<pre><code>&gt; op(myadd2);
          proc(x::numeric, y::numeric) x + y end proc

&gt; myadd2(2, 3);
                                   5

&gt; myadd2(1.5, 3/2);
                              3.000000000


&gt; myadd2(x, y);
Error, invalid input: myadd2 expects its 1st argument, x, 
to be of type numeric, but received x
</code></pre>

<p>Again, note how Maple doesn't tell us that <em>both</em> of the 
supplied arguments are of invalid type: as soon as it detects
one bad argument, it bails out.</p>

<p>Here's a version of <code>myadd</code> which requires <code>integer</code> arguments</p>

<pre><code>&gt; op(myadd3);
              proc(x::integer, y::integer) x + y end proc

&gt; myadd3(3, 5);
                                   8

&gt; myadd3(3.0, 5);
Error, invalid input: myadd3 expects its 1st argument, x, 
to be of type integer, but received 3.0
</code></pre>

<p><strong>IMPORTANT!!</strong></p>

<p><strong>KEY TYPES FOR US</strong></p>

<ol>
<li><code>algebraic</code>
<ul><li>difficult to define precisely without being hideously technical (if 
you don't believe me, get help for <code>type/algebraic</code>),
loosely something that "makes sense" as an algebraic expression.
sense.</li></ul></li>
<li><code>numeric</code>
<ul><li>integer, rational (fraction) or finite floating point number 
(doesn't include <em>everything</em> that you might consider "numeric",
such as complex values)</li></ul></li>
<li><code>integer</code>
<ul><li>integer</li></ul></li>
<li><code>float</code>
<ul><li>finite floating point number</li></ul></li>
<li><code>list</code>
<ul><li>Anything of the form <code>[ &lt;sequence-of-maple-expressions&gt; ]</code></li></ul></li>
</ol>

<p><strong>QUESTION</strong></p>

<p>Why wouldn't (isn't) a Maple <em>sequence</em>, e.g.</p>

<pre><code>1, 2, 3
</code></pre>

<p>be a valid type? (Hint: How would/could a procedure check that an 
argument was of this type?)</p>

<h2><span class="contents_item"><a href="#table_of_contents_8" id="contents_item_8">
8</a>
</span>Syntax errors</h2>

<p>(The most basic type of bug encountered in programming)</p>

<pre><code>Syntax error -&gt; (grammatically) improper construction of code.
</code></pre>

<p>You will be informed of the first error encountered, as well as
some information about the location of the error, but it will not
always be obvious exactly what the error is.</p>

<p>Finding and removing syntax errors is a key talent that must be
honed for programming in any language: experience is the primary means
to develop the skill (in addition to the acceptance that you have made
an error!)</p>

<ul>
<li><p>Correcting syntax errors: Easiest type of debugging and, except
for novices, really isn't considered true debugging at all (since 
the programming-language-interpreter will keep telling you that 
something's wrong until you get it right!)</p></li>
<li><p>Finding and fixing</p>

<ol><li><em>Conceptual errors:</em> you don't understand exactly what you need/want
to do </li>
<li><em>Implementation errors:</em> you know what you need/want to do but
your program doesn't work the way you planned; i.e. the 
output is incorrect</li></ol>

<p>are more difficult tasks in general.</p></li>
</ul>

<p>Look at contents of <code>err1</code> (using <code>cat</code> or browser)</p>

<pre><code>######################################################
# PHYSICS 210
#
# Illustrates syntax error in definition of procedure
######################################################

err1 := proc(x,y)
  x + y
end porc;
</code></pre>

<p>Read <code>err1</code> into your xmaple session</p>

<pre><code>&gt; read err1;

   on line 8, syntax error, missing operator or `;`:
   end porc;
          ^
   Error, while reading `err1`
</code></pre>

<p>Notice the reference to a line number, the error message,
and the caret '^', which indicates where Maple thinks the
error is (approximately).</p>

<p><strong>WHAT IS THE ERROR?</strong></p>

<p>We'll fix it later ...</p>

<h3><span class="contents_item"><a href="#table_of_contents_8.1" id="contents_item_8.1">
8.1</a>
</span>EXERCISE: Write a simple procedure.</h3>

<p>Using your text editor, create the file <code>myprocs1</code> that contains
a definition for the following procedure</p>

<ul>
<li>Procedure name: <code>mysub1</code>
<ul><li>Arguments: <code>a, b</code> (no restrictions on the type of arguments)</li>
<li>What the procedure does: Computes the difference of <code>a</code> and <code>b</code></li></ul></li>
</ul>

<p>Make sure that the file <code>myprocs1</code> lives in <code>~/maplepgm</code></p>

<p>Read <code>myprocs1</code> into your xmaple session via</p>

<pre><code>&gt; read myprocs1;
</code></pre>

<p>and test it with various input.</p>

<p>If you have one or more syntax errors, try to fix them by</p>

<ul>
<li>Editing <code>myprocs1</code> </li>
<li>Saving <code>myprocs1</code></li>
<li>Re-reading <code>myprocs1</code> into Maple</li>
<li>Iterating as necessary</li>
</ul>

<p><strong>NOTE</strong></p>

<p>To expedite this process, manipulate, resize and configure windows 
for (at least) your editor session and xmaple so that you can
see both on the screen simultaneously, without having to iconify or, worse
yet, exit one to see what's going on in the other.</p>

<p>If you haven't yet adjusted the 
font size in your editor so that it is about as small as is comfortable 
for you to read, now's the time to do so.  That way you'll be able 
to see more text (program) using less screen real estate; ditto your 
xmaple window (use, e.g., <em>View -> Zoom</em>), and terminal application
(use <em>Settings -> Edit Current Profile -> Appearance -> Text Size</em>).</p>

<p><strong>ASK FOR HELP AS NECESSARY!</strong></p>

<h3><span class="contents_item"><a href="#table_of_contents_8.2" id="contents_item_8.2">
8.2</a>
</span>EXERCISE: Write another simple procedure.</h3>

<p>Add another procedure definition to the file <code>myprocs1</code> as follows (I'll
subsequently use the term <em>Function</em> instead of <em>What the 
procedure does</em>.</p>

<ul>
<li>Procedure name: <code>mysub2</code>
<ul><li>Arguments: <code>a, b</code> (<code>a</code> must be numeric, <code>b</code> must be integer)</li>
<li>Function: Computes the difference of <code>a</code> and <code>b</code></li></ul></li>
</ul>

<p>Test/debug as before.</p>

<p><strong>IMPORTANT</strong> </p>

<p>Each time you modify <code>myprocs1</code>, be sure to <em>save it</em>, then 
<em>reload it</em> into Maple using</p>

<pre><code>&gt; read myprocs1;
</code></pre>

<h2><span class="contents_item"><a href="#table_of_contents_9" id="contents_item_9">
9</a>
</span>EXERCISE: Debug the definition of <code>err1</code></h2>

<p>Fix the error in <code>err1</code> using your text editor, save the file
(overwrite previous <code>err1</code>), reread and verify that <code>err1</code> works</p>

<p><strong>NOTE</strong></p>

<p>When <code>err1</code> is read, Maple reports that there is a syntax
error <code>on line 8</code>: it is thus useful to see line numbers when you
are editing Maple source files</p>

<ol>
<li>If you are using kate, you can turn on line-numbering via
<ul><li><em>Settings -> Configure Kate -> Editor Component -> Appearance -> Borders -> Show Line Numbers [check] -> Apply</em></li></ul></li>
<li>If you are using gedit, you can turn on line-numbering via
<ul><li><em>Edit -> Preferences -> Display line numbers [check] -> Close</em></li></ul></li>
</ol>

<h2><span class="contents_item"><a href="#table_of_contents_10" id="contents_item_10">
10</a>
</span>The <code>print</code> statement</h2>

<p>Use <code>print</code> to display (print) one or more values. Can be useful, for
example, to output "intermediate" values in procedures, often to 
trace/debug execution, since only the last result evaluated in a 
procedure is returned.</p>

<p><code>print</code> can take an arbitrary number of arguments; string arguments especially
useful for producing output fit for human consumption:</p>

<pre><code>&gt; a := 2;
                            a := 2

&gt; print("The value of a is",  a);
                    "The value of a is", 2

&gt; print("Here are three numbers", 1, 17, 42);
                  "Here are three numbers", 1, 17, 42
</code></pre>

<p><strong>IMPORTANT!!</strong></p>

<p>When programming procedures, do <em>not</em> confuse:</p>

<ol>
<li><em>Printing</em> the value of a variable from within a procedure.</li>
<li><em>Returning</em> a value from the procedure.</li>
</ol>

<p>Even though these may seem to be related/equivalent in terms of what you
see on the screen, they are <em>distinct</em> concepts/operations.  In particular,
in contrast to a returned value, a printed value can <em>not</em> be assigned
to another variable or used in another Maple statement.</p>

<p>To emphasize this point, consider the following sequence of statements:</p>

<pre><code>&gt; 2;
            2

&gt; print(2);
            2
</code></pre>

<p>From what (literally) appears on the screen there is 
<em>absolutely no way to tell that what Maple is actually outputting
is completely different in the two instances</em>.  To see the distinction 
let's assign the value returned by each statement to different
variables. (Recall that I 
told you that <em>every</em> Maple statement does return a value---we'll 
actually encounter a single exception, but let's ignore that for 
now.)</p>

<pre><code>&gt; res1 := 2;
               res1 := 2

&gt; res2 := print(2);

               2

               res2 :=
</code></pre>

<p>Observe the following about the second assignment:</p>

<ul>
<li><p>Maple produces <em>two</em> lines of output:</p>

<ol><li>The <code>2</code>, which is produced by the <code>print</code> command.</li>
<li><p>The echoing of the assignment of "nothing" (literally) to 
<code>res2</code></p>

<pre><code>res2 := 
</code></pre></li></ol></li>
</ul>

<p>That is, <code>print(2)</code> causes <code>2</code> to appear on the terminal
("prints" 2), but returns <em>nothing</em>. </p>

<p>Verify this by asking Maple to display the values of <code>res1</code> and <code>res2</code> (here
I'm being careful to copy-and-paste <em>precisely</em> what Maple does, i.e. <em>not</em>
adding any empty lines to improve readability):</p>

<pre><code>&gt; res1;
               2:

&gt; res2;
&gt;
</code></pre>

<p>This may be confusing, and if it is to you, feel free to ask for clarification.</p>

<h2><span class="contents_item"><a href="#table_of_contents_11" id="contents_item_11">
11</a>
</span>Selection: the <code>if</code> statement</h2>

<p><em>Here and below recall that constructs of the form <code>something</code> 
mean that <code>something</code> (including the "meta-parentheses" &lt;>) is to be 
replaced with a specific instance of a "something"</em></p>

<p><strong>General Form</strong></p>

<pre><code>&lt;Bexpr&gt; = Boolean expression
&lt;ss&gt; = statement sequence

if &lt;Bexpr1&gt; then
  &lt;ss1&gt;
elif &lt;Bexpr2&gt; then
  &lt;ss2&gt;
elif &lt;Bexpr3&gt; then
  &lt;ss3&gt;
         .
         .
         .
else
  &lt;ssn&gt;
end if;
</code></pre>

<p><strong>Semantics</strong> (i.e. what happens)</p>

<pre><code>If &lt;Bexpr1&gt; is true, execute statement sequence &lt;ss1&gt;, 
    then continue execution with the first statement after end if

Otherwise, if &lt;Bexpr2&gt; is true, execute &lt;ss2&gt;, 
    then continue execution with the first statement after end if

Otherwise, if &lt;Bexpr3&gt; is true, execute &lt;ss3&gt;, 
    then continue execution with the first statement after end if

                    .
                    .
                    .
If all elif tests are false, execute &lt;ssn&gt;, 
    then continue execution with the first statement after end if
</code></pre>

<p><strong>Note</strong></p>

<p>In this most general form of the <code>if</code> statement:</p>

<pre><code>Exactly one of the statement sequences &lt;ss1&gt;, &lt;ss2&gt; .., &lt;ssn&gt; is executed.
</code></pre>

<h3><span class="contents_item"><a href="#table_of_contents_11.1" id="contents_item_11.1">
11.1</a>
</span>The "else-less" <code>if</code> statement</h3>

<p>Among all the clauses/statement-sequences in the general form, only 
the first is required.  Thus there is a particularly simple form 
of <code>if</code> statement which one encounters frequently in programming:</p>

<pre><code>if &lt;Bexpr&gt; then
    &lt;ss&gt;
end if
</code></pre>

<p>i.e.</p>

<pre><code>If &lt;Bexpr&gt; evaluates to true, execute &lt;ss&gt;,
    then continue execution with the first statement after end if
Otherwise continue execution with the first statement after end if
</code></pre>

<h2><span class="contents_item"><a href="#table_of_contents_12" id="contents_item_12">
12</a>
</span>Boolean operators and expressions</h2>

<p>As with any programming language, it is important to be able to construct
logical expressions whose typical used is in <code>if</code> statements.</p>

<p>Maple has a special Boolean type, that uses the special values <code>true</code> and 
<code>false</code> for logical truth and logical falsity (don't blame me for the 
word: try <code>?Boolean</code> at the Maple prompt)</p>

<pre><code>&gt; true;
                true
&gt; false;
                false
</code></pre>

<p>Non-trivial Boolean <em>expressions</em>---expressions that evaluate to 
<code>true</code> or <code>false</code> can be constructed using </p>

<ul>
<li>Relational operators</li>
<li>Logical operators</li>
</ul>

<h3><span class="contents_item"><a href="#table_of_contents_12.1" id="contents_item_12.1">
12.1</a>
</span>Relational Operators</h3>

<p>Here are the most commonly used relational operators, and their 
meanings:</p>

<pre><code>=       -&gt; equal
&lt;&gt;      -&gt; not equal
&lt;       -&gt; less than
&gt;       -&gt; greater than
&lt;=      -&gt; less than or equal
&gt;=      -&gt; greater than or equal
</code></pre>

<h3><span class="contents_item"><a href="#table_of_contents_12.2" id="contents_item_12.2">
12.2</a>
</span>Logical Operators</h3>

<p>We can also use the following logical operators in Boolean expressions:</p>

<pre><code>and     -&gt;  true if both operands are true, false otherwise
or      -&gt;  true if either or both operands is/are true, false otherwise
not     -&gt;  negates sense of expression
</code></pre>

<p>Refer to the programming guides or online help for operator precedence: 
safest simply to use parentheses to ensure evaluation order is what we want.</p>

<p><em>Examples</em></p>

<pre><code>&gt; not true;

&gt; not not true;
            true;

&gt; true and false;
            false;

&gt; true and true;
            true;

&gt; true or false;
            true;

&gt; if 3 &gt; 2 then print("foo") end if;
            "foo"

&gt; if 2 &lt;&gt; (1 + 1) then print("foo") else print("bar") end if;
            "bar"
</code></pre>

<p></p>

<h3><span class="contents_item"><a href="#table_of_contents_12.3" id="contents_item_12.3">
12.3</a>
</span>Boolean-valued (logical) expressions</h3>

<p>First, the following illustrates two other Maple features</p>

<ol>
<li>Multiple statements can be typed on a single line</li>
<li><p>A colon (:) can also be used to terminate a statement, and will cause the 
output from the statement to be <em>suppressed</em>.</p>

<pre><code>&gt; a := 3: b := 2: c := 5:
</code></pre></li>
</ol>

<p>Note that there is no output because we terminated the assignment statements 
with colons.</p>

<p>Example using <code>and</code> ... boolean expression is <code>true</code> if <em>both</em>
<code>a &lt;= b</code> <em>and</em> <code>b &lt;= c</code> are true:</p>

<pre><code>&gt; if (a &lt;= b) and (b &lt;= c) then b else a + c end if;
             8
</code></pre>

<p>Example using <code>or</code> ... boolean expression is true if <em>either/both</em>
of <code>a &lt; b</code> and <code>a &lt;&gt; c</code> is/are true:</p>

<pre><code>&gt; if (a &lt; b) or (a &lt;&gt; c) then b else c end if;
             2
</code></pre>

<p>Example using <code>not</code> ... <code>not</code> "reverses" value of Boolean expression:</p>

<pre><code>&gt; not true;
             false

&gt; not false;
             true

&gt; if not (a &gt; b) then a else b end if;
             2
</code></pre>

<p>We can evaluate general <code>Bexpr</code> to determine its truth value using the
<code>evalb</code> procedure.  This is analogous to <code>evalf</code> for floating point
evaluation:</p>

<pre><code>&gt; evalb(3 &gt; 2);
                true

&gt; evalb(2 &gt; 3);
                false

&gt; a; b; 
                3

                2

&gt; evalb(a &lt;&gt; b);
                true

&gt; evalb(a &lt;= b);
                false
</code></pre>

<h4><span class="contents_item"><a href="#table_of_contents_12.3.1" id="contents_item_12.3.1">
12.3.1</a>
</span>Some trickier examples of Boolean expressions</h4>

<pre><code>&gt; xx; yy;
                xx

                yy

&gt; evalb(xx = yy);
                false
</code></pre>

<p>So, Maple considers that two distinct names are not equal to one another
with respect to Boolean evaluation.</p>

<p>How about this:</p>

<pre><code>&gt; evalb(xx &lt;= yy);
                    xx &lt;= yy
</code></pre>

<p>Why?</p>

<p>What do you think this will evaluate to?</p>

<pre><code>&gt; evalb(100! &gt; exp(100));
</code></pre>

<p>Try it!</p>

<p>Or this?</p>

<pre><code>&gt; evalb(100! &gt; exp(100.));
</code></pre>

<p>Go ahead, make Maple's day ...</p>

<p><em>Try to explain Maple's behaviour in the last 3 examples to your neighbor(s).</em></p>

<p><strong>BEGIN ASIDE</strong></p>

<p>Maple uses "McCarthy" evaluation rules: </p>

<ul>
<li>The evaluation of a Boolean expression <em>stops</em> as soon as its truth 
value is known</li>
</ul>

<p>This can have important consequences:</p>

<pre><code>&gt; mylogical := proc(x) print("I've been invoked!  Ouch!!"); end proc:

&gt; mylogical(y);
             "I've been invoked!  Ouch!!"

&gt; a := 10:

&gt; if (a &gt; 2) or mylogical(b) then a else b end if;

                                       10
</code></pre>

<p>The procedure call <code>mylogical(b)</code> does <em>not</em>  get executed in this case!</p>

<p><strong>END ASIDE</strong></p>

<p><strong>NOTE</strong></p>

<p>Logical operators can also be used in <em>algebraic expressions</em>,
where they often "placeholders" for constructing equations,
inequalities, etc.  Here are some examples:</p>

<pre><code>&gt; eqn := x = 3 * y + 16;

            eqn := x = y

&gt; solve(eqn, y);

            - 16/3 + x/3

&gt; ineq := 2 * z &gt; 12 * q - 24;

    ineq := 12 q - 24 &lt; 2 z

&gt; solve(ineq, q);

            {q &lt; z/6 + 2}
</code></pre>

<h2><span class="contents_item"><a href="#table_of_contents_13" id="contents_item_13">
13</a>
</span>Sample procedures using <code>if</code> statements</h2>

<h3><span class="contents_item"><a href="#table_of_contents_13.1" id="contents_item_13.1">
13.1</a>
</span>myif: Simple <code>if-then-else</code> with no type checking</h3>

<pre><code>&gt; op(myif);
               proc(a, b) if b &lt; a then a else b end if end proc


&gt; myif(3, 2);
                                       3

&gt; myif(3, 10.0);
                                     10.0
</code></pre>

<p>Try an invocation that doesn't seem to make sense  ...</p>

<pre><code>&gt; myif(3, x);
Error, (in myif) cannot determine if this expression is true or false: x &lt; 3
</code></pre>

<p>... and Maple returns an appropriate error message</p>

<h3><span class="contents_item"><a href="#table_of_contents_13.2" id="contents_item_13.2">
13.2</a>
</span>myif1: Simple <code>if-then-else</code> with type checking</h3>

<pre><code>&gt; op(myif1);

      proc(a::numeric, b::numeric) if b &lt; a then a else b end if end proc
</code></pre>

<p>Note how Maple has transformed <code>a &gt; b</code> in the code in the file <code>procs</code>
to <code>b &lt; a</code>.  The two forms are algebraically equivalent of course.</p>

<pre><code>&gt; myif1(10, 3);
                                       10
&gt; myif1(x, 2);
Error, invalid input: myif1 expects its 1st argument, a, to be of type numeric,
but received x
</code></pre>

<h3><span class="contents_item"><a href="#table_of_contents_13.3" id="contents_item_13.3">
13.3</a>
</span>myif2: <code>if-then-else</code> with more complicated test</h3>

<pre><code>&gt; op(myif2);

proc(a::numeric, b::numeric, c::numeric)
    if 5 &lt; a + b and 10 &lt; a + c then true else false end if
end proc

&gt; myif2(1,5,12);
                                     true

&gt; myif2(1,5,6);
                                     false
</code></pre>

<h3><span class="contents_item"><a href="#table_of_contents_13.4" id="contents_item_13.4">
13.4</a>
</span>myif3: Simple <code>if-then-elif-else</code></h3>

<pre><code>&gt; op(myif3);

myif3 :=
    proc(x::numeric) if 0 &lt; x then 1 elif x &lt; 0 then -1 else 0 end if end proc

&gt; myif3(2);
                                       1

&gt; myif3(-3);
                                      -1

&gt; myif3(0);
                                       0
</code></pre>

<h2><span class="contents_item"><a href="#table_of_contents_14" id="contents_item_14">
14</a>
</span>EXERCISE: Writing basic Maple procedures</h2>

<p>Using your text editor, create a file named <code>~/maplepgm/myprocs2</code>
that contains definitions of procedures that do the following
(recall that Maple is case-sensitive)</p>

<p>Do as many as you can!</p>

<p>Test your procedures interactively---particularly for
<code>myifC</code> try to make your testing exhaustive (i.e. all
possible permutations of x1, x2, x3 with respect to
"largest" property, including cases where two or all three numbers
have the maximum value)</p>

<ol>
<li><p><code>myaddA</code></p>

<ul><li>Arguments: a, b, c (no type checking)</li>
<li>Function: Returns sum of a, b and c</li></ul></li>
<li><p><code>myaddB</code></p>

<ul><li>Arguments: a, b, c (a, b, c must all be of integer type)</li>
<li>Function: Returns sum of a, b and c</li></ul></li>
<li><p><code>myaddC</code></p>

<ul><li>Arguments: x, y, z  (x, y, must be numeric, z algebraic)</li>
<li>Function: Returns sum of x, y and z</li></ul></li>
<li><p><code>myifA</code></p>

<ul><li>Arguments: a, b (a, b must be numeric)</li>
<li>Function: Returns larger of (sum of a and b) and (product of a and b)</li></ul></li>
<li><p><code>myifB</code></p>

<ul><li>Arguments: a1, a2, a3 (all numeric)</li>
<li>Function: If sum of arguments is positive, returns product of the numbers,
if sum of arguments is negative, returns reciprocal of the
product of the numbers, otherwise returns 0</li></ul></li>
<li><p><code>myifC</code></p>

<ul><li>Arguments: x1, x2, x3 (all numeric)</li>
<li>Function: Returns largest value among its three arguments (note: one, two
or all three of the arguments can have the largest value)</li></ul></li>
</ol>

<h2><span class="contents_item"><a href="#table_of_contents_15" id="contents_item_15">
15</a>
</span>EXERCISE: Locating and repairing syntax errors in <code>if</code> statements</h2>

<p>Examine the contents of the file <code>errif</code>.</p>

<p>Read the file into Maple:</p>

<pre><code>&gt; read errif;
In line 9, syntax error, missing operator or `;`:
      a;
      ^
Error, while reading `errif`
</code></pre>

<p>Find and correct the syntax error(s) in the three procedures
defined in <code>errif</code></p>

<h2><span class="contents_item"><a href="#table_of_contents_16" id="contents_item_16">
16</a>
</span>Sample solutions to exercises from previous lab</h2>

<p>Can be found in</p>

<pre><code>~phys210/maplesolns/myprocs2soln

% cd ~phys210/maplesolns
% ls
max3  myifCbad  myprocs2soln  tmax3  tmyifCbad
</code></pre>

<p>or by browsing 
<a href="/Students/phys210/maple-code-solns/"><strong>HERE</strong></a>.</p>

<p>Look at 
<a href="/Students/phys210/maple-code-solns/myprocs2soln"><code>myprocs2soln</code></a>.</p>

<p>Also look at 
<a href="/Students/phys210/maple-code-solns/myifCbad"><code>myifCbad</code></a>.</p>

<p>We will return to this example (procedure that returns largest of 
maximum of three values) later in lab</p>

<h2><span class="contents_item"><a href="#table_of_contents_17" id="contents_item_17">
17</a>
</span>Testing Maple procedures</h2>

<p>Whenever you create a file that contains definitions of Maple 
procedures, it is an excellent idea (i.e. recommended practice)! 
to create another file which tests the procedures, both with 
valid and invalid input.</p>

<p>In a terminal window, change to the <code>maplepgm</code> directory we 
created/used in the last lab, and get a directory listing</p>

<pre><code>% cd
% cd maplepgm
</code></pre>

<p>Examine the file <a href="/Students/phys210/maple-code/tprocs"><code>tprocs</code></a>
(or use <code>more</code> or <code>cat</code> in the terminal window)</p>

<p>Start xmaple in the background from the same terminal, and read in <code>tprocs</code></p>

<pre><code>% xmaple &amp;

&gt; read tprocs;
</code></pre>

<p>You should see output like the following:</p>

<pre><code>               "Testing of myadd begins"

                           5

                         w + z

                         2         2
                   sin(x)  + cos(x)

                       "a" + "b"

                "Testing of myadd ends"

       "Testing of myadd with more info begins"

           "The value of myadd(2, 3) is", 5

         "The value of myadd(w, z) is", w + z

                                                       2         2
    "The value of myadd(sin(x)^2, cos(x)^2) is", sin(x)  + cos(x)

          "The value of myadd("a"+"b") is", "a" + "b"

            "Testing of myadd with more info ends"
</code></pre>

<p>Preparing a testing file for each file of procedures will ultimately save
time when testing procedures, versus doing the testing interactively.</p>

<h2><span class="contents_item"><a href="#table_of_contents_18" id="contents_item_18">
18</a>
</span>Important: Change of setup</h2>

<p>Exit the xmaple session (don't save the worksheet), ensure that 
you are still in your ~/maplepgm directory </p>

<pre><code>% cd
% cd maplepgm
% pwd
/home2/phys210f/maplepgm
</code></pre>

<p>then execute the following CP command (use the upper case version 
since there are files that we want to overwrite):</p>

<pre><code>% CP ~phys210/maplepgm/* .
</code></pre>

<p>Get a listing of the directory, and you should see the following</p>

<pre><code>% ls
err1   glob   imp         loc   locbad    myprocs2  procs2  tprocs2
errif  glob1  index.html  loc1  myprocs1  procs     tprocs
</code></pre>

<p>You can look at any of the files using <code>cat</code> or <code>more</code> in a terminal, or,
again, point your browser </p>

<blockquote>
  <p><a href="http://laplace.phas.ubc.ca/Students/phys210/maple-code/"><strong>HERE</strong></a></p>
</blockquote>

<p>and then click on the appropriate links.</p>

<p>Start xmaple from the command line (in <code>~/maplepgm</code>) </p>

<pre><code>% xmaple &amp;
</code></pre>

<h2><span class="contents_item"><a href="#table_of_contents_19" id="contents_item_19">
19</a>
</span>Global and local variables</h2>

<p>We have seen the use of <em>variables</em> in Maple, which (as in most
programming languages), are used as locations in which to store 
values that will generally change as a procedure/program executes. </p>

<p><strong>Example</strong></p>

<p><code>myfor := proc(n::integer)</code> discussed in class</p>

<pre><code>myfor1 := proc(n::integer)
  for i from 1 to n do
     print(i);
  end do;
end proc;
</code></pre>

<p>Here <code>i</code> is a variable.</p>

<p>There are two types of variables in Maple that will be of interest
to us:</p>

<ol>
<li>Global variables</li>
<li>Local variables</li>
</ol>

<h3><span class="contents_item"><a href="#table_of_contents_19.1" id="contents_item_19.1">
19.1</a>
</span>Global variables</h3>

<p>For our purposes, every Maple variable is given by a Maple name. </p>

<blockquote>
  <p>A <em>global variable</em> is a variable such that when the name is used 
outside all procedures (e.g. at the Maple prompt), or inside <em>any</em>
procedure (with an exception that we will see shortly), the same 
value will be returned. (++)</p>
</blockquote>

<p>Again, this concept is best illustrated by example, so let's 
first look at the file <a href="/Students/phys210/maple-code/glob"><code>glob</code></a>.</p>

<p>Now read <code>glob</code> into your Maple session, and note the output</p>

<pre><code>&gt; read glob; 

                   globalvar := 100

"The value of globalvar outside, and before the procedure call is", 100

         "The value of globarvar inside the procedure is", 100

"The value of globalvar outside, and after the procedure call is", 100
</code></pre>

<p>Note how, as the output indicates, the value of <code>globalvar</code> inside
and outside of the procedure is the same</p>

<p>Now, modify the value of <code>globalvar</code>, and invoke <code>myglobal()</code> again: 
<em>Be sure to type the () (empty argument list), or <code>myglobal</code> will
NOT be executed.</em></p>

<pre><code>&gt; globalvar := 200;

&gt; myglobal();

         "The value of globarvar inside the procedure is", 200
</code></pre>

<p>... so the change of the value of <code>globalvar</code> outside of the procedure 
affects the value inside.</p>

<h3><span class="contents_item"><a href="#table_of_contents_19.2" id="contents_item_19.2">
19.2</a>
</span>Local variables: the <code>local</code> statement</h3>

<blockquote>
  <p>In contrast to a global variable, a <em>local variable</em> is one which is 
defined <em>within a procedure</em> and whose value is <em>local</em> to the procedure.</p>
</blockquote>

<p>If different procedures define a variable with the same name to be 
local, then the value of the variable in one procedure will not 
affect the value of that name in another procedure, or the value
outside all procedures (i.e. at the Maple command line).</p>

<p><strong>IMPORTANT!!</strong></p>

<blockquote>
  <p>Within a procedure, we <em>explicitly</em> define variables to be local
using the <code>local</code> statement. </p>
</blockquote>

<p><strong>Example</strong></p>

<p>Examine the file 
<a href="/Students/phys210/Maple-code/loc"><code>loc</code></a>
note the use of the <code>local</code> statements </p>

<p>Read <code>loc</code>, and note the output</p>

<pre><code>&gt; read loc;

                    localvar := 10

"The value of localvar outside, and before the procedure calls is", 10

       "The value of localvar inside 'mylocal1' is", 3.141592654

       "The value of localvar inside 'mylocal2' is", 2.718281828

 "The value of localvar outside, and after the procedure calls is", 10
</code></pre>

<p>... so we see that the values of <code>localvar</code> at the Maple command prompt, 
and within the two procedures do not "conflict" with one another</p>

<p>Verify this: first set <code>localvar</code> at the interactive prompt to 
a different value:</p>

<pre><code>&gt; localvar := 60;
</code></pre>

<p>Then execute <code>mylocal1()</code> and <code>mylocal2()</code> again</p>

<pre><code>&gt; mylocal1(); mylocal2();


    "The value of localvar inside 'mylocal1' is", 3.141592654

    "The value of localvar inside 'mylocal2' is", 2.718281828
</code></pre>

<p>Note again that when a vbl is declared local to a procedure, it 
"overrides" any value of a vbl with the same name defined at the 
command line (i.e. this is the exception to the rule (++) above)</p>

<h3><span class="contents_item"><a href="#table_of_contents_19.3" id="contents_item_19.3">
19.3</a>
</span>Implicit declaration of global and local variables</h3>

<p>If a Maple name has been assigned a value <em>before</em> a procedure definition
is made, and that procedure uses the name as a variable, then the 
variable is <em>implicitly</em> global.</p>

<p>If a Maple name has <em>not</em> been assigned a value before a procedure 
definition is made, and that procedure uses the name as a variable, 
without an explicit <code>local</code> declaration, then the variable is 
implicitly declared to be local, and a warning message is issued.</p>

<p><strong>Example</strong></p>

<p>Examine the contents of the file 
<a href="/Students/phys210/maple-code/loc1"><code>loc1</code></a>
and then read it in</p>

<pre><code>&gt; read loc1;

Warning, `mylocal3var` is implicitly declared local to procedure `mylocal3`
                            .
                            .
                            .

&gt; mylocal3();

         "The value of mylocal3var inside 'mylocal3' is", 3.141592654
</code></pre>

<p>You should <em>always</em> declare local variables to be such ... I will do 
so in all of the examples that follow (at least I will <em>try</em> to!), 
and you should as well in the lab exercises and especially in the homework.</p>

<p><em>So</em> ... if you see one of more warnings such as the above, be sure to 
modify your procedure definition to explicitly declare all local 
variables.</p>

<p><strong>Note</strong></p>

<p>If a procedure uses more than one local vbl, they can be defined
either with a single statement, or multiple statements, e.g.</p>

<pre><code>local var1, var2, var3;
</code></pre>

<p>and</p>

<pre><code>local var1;
local var2;
local var3;
</code></pre>

<p>are equivalent.</p>

<p><strong>VERY IMPORTANT!</strong></p>

<blockquote>
  <p><code>local</code> statements must be placed <em>immediately after the <code>proc</code>
statement</em> (the procedure header).  </p>

<p>They cannot come after any assignment statements, <code>if</code> statements, 
<code>for</code> statements etc.</p>
</blockquote>

<p>The file 
<a href="/Students/phys210/maple-code/locbad"><code>locbad</code></a>
contains a (defective) procedure definition that
suffers from this misordering problem.</p>

<pre><code>% cat locbad

locbad := proc(x)
   print(x);

   local lx;

   lx := x;
   x^2;
end proc;

&gt; read locbad;
Error, unexpected local declaration in procedure body
</code></pre>

<p>Technically, local statements are part of the procedure header and 
all statements in the header must precede any statement in the body.</p>

<p>This is also a good place to point out that if Maple encounters an
error when reading the definition of a procedure then:</p>

<ol>
<li>If the procedure <em>wasn't</em> previously defined, no definition is 
made, and the name of the procedure remains unassigned.</li>
<li>If the procedure <em>was</em> previously defined, the definition remains
unchanged.</li>
</ol>

<p>In the current case there was no previous definition for <code>locbad</code>, so 
if we ask to see its definition using <code>op</code>, we find</p>

<pre><code>&gt; op(locbad);
                 locbad
</code></pre>

<h2><span class="contents_item"><a href="#table_of_contents_20" id="contents_item_20">
20</a>
</span>Important: Change of setup</h2>

<p>Input the file 
<a href="/Students/phys210/maple-code/procs2"><code>procs2</code></a>
that contains procedure definitions that we 
will be considering for the remainder of the lab</p>

<pre><code>&gt; read procs2;
</code></pre>

<h2><span class="contents_item"><a href="#table_of_contents_21" id="contents_item_21">
21</a>
</span>Iteration (looping): the <code>for</code> statement</h2>

<h3><span class="contents_item"><a href="#table_of_contents_21.1" id="contents_item_21.1">
21.1</a>
</span>Simple form</h3>

<p>We saw this form in the lecture:</p>

<pre><code>&lt;nexpr1&gt; -&gt; numeric expression (best to make it integer)
&lt;nexpr2&gt; -&gt; numeric expression (best to make it integer)
&lt;name&gt;   -&gt; Loop variable (changes at every iteration of loop)
&lt;ss&gt;     -&gt; Statement sequence (body of loop)

for &lt;name&gt; from &lt;nexpr1&gt; to &lt;nexpr2&gt; do
  &lt;ss&gt;
end do;
</code></pre>

<p>The loop body (sequence of statements between <code>for</code> and <code>end do</code> is 
executed repeatedly, with the loop variable changing at each iteration
as follows:</p>

<pre><code>First iteration:   &lt;name&gt; := &lt;nexpr1&gt;
Second iteration:  &lt;name&gt; := &lt;nexpr1&gt; + 1
Third iteration:   &lt;name&gt; := &lt;nexpr1&gt; + 2
                    .
                    .
                    .
Last iteration:    &lt;name&gt; := &lt;nexpr2&gt;
</code></pre>

<p>Again, it is best to keep <code>&lt;nexpr1&gt;</code> and <code>&lt;nexpr2&gt;</code> integer-valued.</p>

<p>Note: Assuming that <code>&lt;nexpr1&gt;</code> and <code>&lt;nexpr2&gt;</code> <em>are</em> integer-valued,
then the total number of times the loop executes is</p>

<pre><code>&lt;nexpr2&gt; - &lt;nexpr1&gt; + 1
</code></pre>

<h3><span class="contents_item"><a href="#table_of_contents_21.2" id="contents_item_21.2">
21.2</a>
</span>General form</h3>

<pre><code>for &lt;name&gt; from &lt;nexpr&gt; by &lt;nexpr&gt; to &lt;nexpr&gt; do 
  &lt;ss&gt; 
end do;

`by` specifies loop increment (step), which can be positive
or negative 
</code></pre>

<p><strong>Begin Aside</strong></p>

<p>The loop increment can also be 0, and Maple won't complain, but this
will result in the notorious "infinite loop" whereby the iteration
doesn't stop until the execution is (externally) interrupted in some manner 
(using the <em>Interrupt the current operation</em> icon, for example).</p>

<p><strong>End Aside</strong></p>

<h3><span class="contents_item"><a href="#table_of_contents_21.3" id="contents_item_21.3">
21.3</a>
</span>Sample procedures that use <code>for</code> statements</h3>

<p><strong>Note</strong></p>

<p>These 3 examples use the <code>print</code> command so that the operation
of the loop is clearer, but remember that you can <em>not</em> use <code>print</code>
to return a value from a procedure.  Also observe the declaration
of the loop variable <code>i</code> to be <code>local</code> in all 3 cases</p>

<p><strong>Note</strong></p>

<p>As we work through the examples, it is best to also look at the 
full definitions in the file 
<a href="/Students/phys210/maple-code/procs2"><code>procs2</code></a>
so that the structures
of the procedures are clearer, and so that you can read the 
comments</p>

<h4><span class="contents_item"><a href="#table_of_contents_21.3.1" id="contents_item_21.3.1">
21.3.1</a>
</span>myfor1: Most basic form of <code>for</code></h4>

<pre><code>&gt; op(myfor1);

   proc(n::integer) local i; for i to n do print(i) end do end proc

&gt; myfor1(5);

                               1

                               2

                               3

                               4

                               5
</code></pre>

<p><strong>Important</strong></p>

<p>I've already mentioned this, but I can't stress it enough: </p>

<p>In these examples, we use 
<code>print</code> statements to explicitly illustrate the execution of the loops.
<em>none</em> of the values that are displayed by these statements are returned 
by the procedures so, again, when coding your own procedures that use 
loops <em>do not attempt</em> to use <code>print</code> to return a value.</p>

<p>In fact, every <code>print</code> statement returns a <em>special</em> value, <code>NULL</code>,
(all upper case, and a Maple reserved word), which essentially means
"nothing".  Try the following:</p>

<pre><code>&gt; NULL;
</code></pre>

<p>... and after you press Enter, you should see that Maple replies with
literally nothing</p>

<pre><code>&gt; res := print("hello");
                          "hello"

                          res :=
</code></pre>

<p>Explicitly demonstrate that <code>print</code> returned <code>NULL</code> using the 
<code>evalb</code> (evaluate in Boolean domain) command</p>

<pre><code>&gt; evalb(res = NULL);
                            true
</code></pre>

<p><strong>End aside</strong></p>

<p>Continuing with our <code>for</code> examples ...</p>

<h4><span class="contents_item"><a href="#table_of_contents_21.3.2" id="contents_item_21.3.2">
21.3.2</a>
</span>myfor2: Uses negative loop increment</h4>

<pre><code>&gt; op(myfor2);

    proc(n::integer)
    local i;
       for i from n by -1 to 1 do print(i) end do
    end proc

&gt; myfor2(5);

                           5

                           4

                           3

                           2

                           1
</code></pre>

<p>Try to predict what the following will do before you execute it</p>

<pre><code>&gt; myfor2(-10);
</code></pre>

<p>So "if there is nothing for the loop to do" then the loop does 
not execute at all (i.e. 0 times)</p>

<h4><span class="contents_item"><a href="#table_of_contents_21.3.3" id="contents_item_21.3.3">
21.3.3</a>
</span>myfor3: Uses loop increment of 3</h4>

<pre><code>&gt; op(myfor3);

    proc(n1::integer, n2::integer)
    local i;
       for i from n1 by 3 to n2 do print(i) end do
    end proc

&gt; myfor3(10, 20);

                          10

                          13

                          16

                          19
</code></pre>

<p>Note that the value of the loop index in a <code>for</code> loop <em>never</em> exceeds
the upper bound if the loop increment/step is positive, or the 
lower bound if the step is negative.</p>

<p>Here's a more interesting example of a procedure that uses a 
<code>for</code> loop:</p>

<h4><span class="contents_item"><a href="#table_of_contents_21.3.4" id="contents_item_21.3.4">
21.3.4</a>
</span>myfactorial: Computes n!</h4>

<p>Here's the definition from the source file:</p>

<pre><code>########################################################################
# Computes n! (Doesn't check that n &gt;= 0, left as exercise)
########################################################################

myfactorial := proc(n::integer)

  # local variables
  #
  # i -&gt; loop variable
  # val -&gt; used to "build up" value to be returned

  local i, val;

  # Initialize return value

  val := 1;

  # Can start loop from 2 (why?)

  for i from 2 to n do

     # Note the structure of the following statement, which is 
     # common is programming: the right hand side of the assignment
     # is evaluated first, the result of that evaluation is 
     # assigned to `val`: i.e. the statement CHANGES the value 
     # of `val`

     val := val * i;

  end do;

  # Return the computed value

  val;

end proc;
</code></pre>

<p>Display the definition in the Maple session ... observe how compact 
Maple's representation of it is (but then again, most of the characters
in my initial definition are in comment lines!)</p>

<pre><code>&gt; op(myfactorial);

    proc(n::integer)
      local i, val;
       val := 1; for i from 2 to n do val := val*i end do; val
    end proc
</code></pre>

<p>Try a couple of sample invocations:</p>

<pre><code>&gt; myfactorial(10);

                            3628800

&gt; myfactorial(100);

933262154439441526816992388562667004907159682643816214685929638952175999932\
    29915608941463976156518286253697920827223758251185210916864000000000000\
    000000000000
</code></pre>

<p>Test to see whether the implementation is correct, at least for 
some "typical" invocation, by comparing with the 
result returned from Maple's built in factorial function:</p>

<pre><code>&gt; myfactorial(100) - 100!;

                               0
</code></pre>

<h2><span class="contents_item"><a href="#table_of_contents_22" id="contents_item_22">
22</a>
</span>The <code>error</code> statement</h2>

<p><strong>Syntax</strong></p>

<pre><code>  error &lt;string&gt;;
</code></pre>

<p>or </p>

<pre><code>  error(&lt;string&gt;);
</code></pre>

<p>i.e. <code>error</code> can be used with or without parentheses.</p>

<p><strong>Semantics</strong></p>

<blockquote>
  <p>A call to <code>error</code> causes the invoking procedure to display an error message
containing <code>&lt;string&gt;</code>, then exit <em>immediately</em>, <em>and the procedure 
does not return a value</em> (not even <code>NULL</code>).</p>
</blockquote>

<p>This command is useful for stopping execution of a procedure when an 
unexpected condition arises, so that it makes no sense for the 
procedure to continue.</p>

<p>Our typical application will be for checking validity of 
procedure arguments beyond that which can be done with the built in
type-checking facility.</p>

<h3><span class="contents_item"><a href="#table_of_contents_22.1" id="contents_item_22.1">
22.1</a>
</span>error_demo: Example procedure that uses the <code>error</code> statement</h3>

<p>This procedure returns an error message and exits if its second
argument is not strictly positive</p>

<p>Definition of error_demo in 
<a href="/Students/phys210/maple-code/procs2"><code>procs2</code></a>
(with comments removed):</p>

<pre><code>error_demo := proc(y::numeric, z::numeric)

   if y &lt;= 0 then
      error "First argument must be positive";
   end if;

   y + z;

end proc;
</code></pre>

<p>Note that the error checking involves the briefest form of 
the <code>if</code> statement, discussed in the previous lab, where there is no 
<code>else</code> clause.</p>

<p>Display the definition of <code>error_demo</code> in the Maple session, and try
some sample invocations:</p>

<pre><code>&gt; op(error_demo);

   proc(y::numeric, z::numeric)
       if y &lt;= 0 then error "First argument must be positive" end if; y + z
   end proc

&gt; error_demo(3, 7);

                          10

&gt; error_demo(-10, 6);

Error, (in error_demo) First argument must be positive
</code></pre>

<p><strong>Observe</strong></p>

<p>When an <code>error</code> statement/command is encountered
in a procedure, the string argument supplied to <code>error</code> is prepended
with 'Error, (in <em>proc-name</em>) ', the resulting string is output,
and the procedure automatically/immediately exits/return.  </p>

<p>Again, when an <code>error</code> statement is executed, the procedure <em>does not 
return a value</em>, as can be seen from the following sequence:</p>

<pre><code>&gt; vbl1;
                                 vbl1


&gt; vbl1 := error_demo(1, 2);
                               vbl1 := 3


&gt; vbl1;
                                   3


&gt; vbl2;
                                 vbl2

&gt; vbl2 := error_demo(-1, 2);
Error, (in error_demo) First argument must be positive


&gt; vbl2;
                                 vbl2
</code></pre>

<p>Note that the value of <code>vbl2</code> (i.e. its name) was unaffected by the
apparent assignment statement <code>vbl2 := error_demo(-1, 2);</code></p>

<p><strong>Important</strong></p>

<blockquote>
  <p>You will need to use the <code>error</code> statement when implementing some 
of the procedures in the Maple homework.</p>
</blockquote>

<h2><span class="contents_item"><a href="#table_of_contents_23" id="contents_item_23">
23</a>
</span>Maple arrays I: One dimensional arrays</h2>

<p>As with many other programming languages, one of the most 
basic and important data structures in Maple is the <em>array</em>.</p>

<p>An array is a structured collection of elements which is organized 
in a "rectangular" or "Cartesian" fashion: this notion will 
become clearer in the next lab when we consider two-dimensional 
arrays.</p>

<p>A one-dimensional (1D) array can be viewed simply as an ordered set 
of Maple expressions.  There are essentially no restrictions on 
what can be stored in any given element of an array, but for 
simplicity, we will focus on the case where each element is a 
numeric value. This is precisely the same type of array that 
we will encounter in our study of Matlab and, if it helps,
think of a 1D array as a row or column of values in a spreadsheet.</p>

<h3><span class="contents_item"><a href="#table_of_contents_23.1" id="contents_item_23.1">
23.1</a>
</span>Defining 1D arrays: The <code>Array</code> command.</h3>

<p>Maple arrays are created using the <code>Array</code> 
command, which for 1D arrays has one required argument that defines the 
range of the array's <em>indexes</em>.  Array indexes in Maple can 
be arbitrary integers but again for simplicity, as well as 
to parallel what we will encounter in Matlab, we will always 
use ranges that start from 1.</p>

<p>Recall that a <em>range</em> in Maple is specified with the syntax</p>

<pre><code>&lt;integer1&gt; .. &lt;integer2&gt;
</code></pre>

<p>and is effectively shorthand for the <em>sequence</em> of consecutive
integers from <code>&lt;integer1&gt;</code> to <code>&lt;integer2&gt;</code> inclusive.</p>

<p>Thus  ...</p>

<pre><code>1 .. 5
</code></pre>

<p>... for example, means</p>

<pre><code>1, 2, 3, 4, 5
</code></pre>

<p>The general syntax for defining (creating) a one-dimensional array of length
<code>&lt;n&gt;</code>, with indexes that range from <code>1</code> through <code>&lt;n&gt;</code> inclusive,
and assigning it to a variable <code>&lt;arrayvar&gt;</code> is</p>

<pre><code>&lt;arrayvar&gt; := Array(1 .. &lt;n&gt;);
</code></pre>

<p><strong>Begin important note</strong></p>

<p>Note that the array-creation command that we will use is <code>Array</code> 
(upper-case A), <em>not</em> <code>array</code> (lower case a).  The latter is also
a valid Maple command that creates arrays, but of a somewhat different
sort, and its use is a "deprecated" feature meaning that it will 
only be maintained so that legacy code doesn't "break".  </p>

<p>Any new 
code, such as that which you will write, should use <code>Array</code>.</p>

<p><strong>End important note</strong></p>

<p>Here's a specific array-creation example:</p>

<pre><code>&gt; a1 := Array(1 .. 10);

     a1 := [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
</code></pre>

<p>Observe the following about the Maple output from the <code>Array</code> command:</p>

<ol>
<li><p>A 1D array with 10 elements was created and assigned to the variable
(name) <code>a1</code>.</p></li>
<li><p>Maple initialized all elements to the value <code>0</code>.  This is the default
mode of operation for all array creation.</p></li>
<li><p>The collection of elements that Maple echoes, i.e. the contents
of the array are enclosed in (square) brackets and</p>

<ol><li>Separated with commas in command-line Maple.</li>
<li>Separated with whitespace in GUI Maple.</li></ol>

<p>This is the same form that is used to display <em>lists</em>, and
we need to take care not to confuse the two types of data structures. 
We will return to this point shortly.</p></li>
</ol>

<p>Because defining a very large array could result in a very large 
amount of output, by default Maple will refuse to display in-line the actual
elements for 1D arrays with more than 10 elements (25 elements 
for command line Maple, and we can 
change this behaviour with the <code>interface</code> command, but for the 
time being will accept it as a fact of life)</p>

<p>Thus if we define an array with a length > 10, Maple produces 
a different type of output:</p>

<pre><code>&gt; a2 := Array(1 .. 100);

                  [ 1..100 1-D Array     ]
            a2 := [ Data Type: anything  ]
                  [ Storage: rectangular ]
                  [ Order: Fortran_order ]
</code></pre>

<p>If you are executing this within an <code>xmaple</code> session you can 
double-click on the text within the brackets to open up a data browser
that will allow you to inspect (and modify) the contents of the
array.</p>

<h3><span class="contents_item"><a href="#table_of_contents_23.2" id="contents_item_23.2">
23.2</a>
</span>Accessing elements of a 1D array.</h3>

<p>Individual elements of a 1D array are accessed with an indexing
syntax that uses the square brackets.  </p>

<p>For example, to refer to the 4-th element of <code>a1</code>, we use</p>

<pre><code>a1[4]
</code></pre>

<p>If we type ...</p>

<pre><code>&gt; a1[4];
                   0
</code></pre>

<p>... Maple will echo the value of the 4-th element, which like all
the other elements is <code>0</code>, due to the default initialization process.</p>

<p>We can <em>set</em> the values of specific array elements using assignment. 
For example</p>

<pre><code>&gt; a1[1] := 1;

                  a1[1] := 1
</code></pre>

<p>Note that within xmaple, Maple "pretty prints" the output using 
a subscript notation for the array index.  Let's make assignments
to a couple more elements:</p>

<pre><code>&gt; a1[3] := 10.2;

                 a1[3] := 10.2


&gt; a1[10] := evalf(Pi);

             a1[10] := 3.141592654
</code></pre>

<p>We can see the net effect of these three assignments by evaluating
the array name itself.</p>

<pre><code>&gt; a1;

      [1, 0, 10.2, 0, 0, 0, 0, 0, 0, 3.141592654]
</code></pre>

<p>Note that what appears on the right hand side of an assignment to
an array element can be an arbitrary Maple expression.  For example 
we could set ...</p>

<pre><code>&gt; a1[5] := a1[5] + (a1[1] + a1[10]) / 10.0;

             a1[5] := 0.4141592654
</code></pre>

<p>... so that our array now has contents ...</p>

<pre><code>&gt; a1;

    [1, 0, 10.2, 0, 0.4141592654, 0, 0, 0, 0, 3.141592654]
</code></pre>

<p>Similarly, what appears within the <code>[ ]</code> on the left hand side
is also arbitrary, so long as it evaluates to an integer which
is within the range of the arrays indexes.  For example ...</p>

<pre><code>&gt; ii := 3;

                    ii := 3

&gt; a1[ii + 1] := evalf(sqrt(2));

             a1[4] := 1.414213562

&gt; a1;

        [1, 8, 27, 1.414213562, 125, 216, 343, 512, 729, 1000]
</code></pre>

<p>1D arrays and simple <code>for</code> loops are natural compatriots.  Let's 
use a <code>for</code> loop to set the values of <code>a</code> to the cubes of the 
integers from 1 to 10:</p>

<pre><code>&gt; for i from 1 to 10 do a1[i] := i^3: end do:
</code></pre>

<p>Note how I have typed the <code>for</code> loop on one line, which is <em>not</em>
good programming style, but is OK for demo purposes. </p>

<p><strong>Begin aside</strong></p>

<p>Also note 
that I've ended the <code>for</code> statement with a colon to suppress any output 
from the assignment statements.</p>

<p>In particular, if we use a semi-colon after the <code>end do</code> then the 
output from all the assignments in the body of the <code>for</code> loop are
echoed even if the assignment statement per se still is terminated
with a colon (try it!).  This behaviour carries over to the other Maple control
structures, such as the <code>if</code> statement.</p>

<p><strong>End aside</strong></p>

<p>Examine the contents of <code>a1</code>:</p>

<pre><code>&gt; a1; 

 [1, 8, 27, 64, 125, 216, 343, 512, 729, 1000]
</code></pre>

<h3><span class="contents_item"><a href="#table_of_contents_23.3" id="contents_item_23.3">
23.3</a>
</span>Initializing 1D arrays with arbitrary values.</h3>

<p>If a second argument is supplied to <code>Array</code> when a 1D array 
is created, it should be a <em>list</em> of values with which 
to initialize the elements of the array.  </p>

<p>For example:</p>

<pre><code>&gt; a_few_primes := Array(1 .. 7, [2, 3, 5, 7, 11, 13, 17]);

       a_few_primes := [2, 3, 5, 7, 11, 13, 17]
</code></pre>

<p>Select a few elements of this array using indexing:</p>

<pre><code>&gt; a_few_primes[3];

                    5;

&gt; a_few_primes[7];

                    17;
</code></pre>

<h3><span class="contents_item"><a href="#table_of_contents_23.4" id="contents_item_23.4">
23.4</a>
</span>Initializing 1D arrays with a constant value.</h3>

<p>If we want to initialize all array elements to some specific non-zero
value, we can use the <code>fill</code> option of the <code>Array</code> command.  Here's
an example.</p>

<pre><code>&gt; six_49 := Array(1..6, fill=49);

          six_49 := [49, 49, 49, 49, 49, 49]
</code></pre>

<h3><span class="contents_item"><a href="#table_of_contents_23.5" id="contents_item_23.5">
23.5</a>
</span>Out-of-range indexes.</h3>

<p>If you use index a 1D array with an expression that is  ...</p>

<ol>
<li>Not an integer</li>
<li>Not in the index range</li>
</ol>

<p>... Maple will complain with an error message.</p>

<p>Examples:</p>

<pre><code>&gt; a2 := Array(1..5);

&gt; a2[0];
Error, Array index out of range

&gt; a2[6];
Error, Array index out of range

&gt; a2[0.5];
Error, bad index into Array

&gt; a2[foo];
Error, bad index into Array
</code></pre>

<p><strong>Begin aside</strong></p>

<p>There is a twist here, however.  For 1D arrays with index ranges 
from <code>1</code> to <code>n</code>, Maple maps negative indexes from <code>-1</code> to 
<code>-n</code> as follows:</p>

<pre><code>a[-1]  -&gt;  a[n]
a[-2]  -&gt;  a[n-1]
a[-3]  -&gt;  a[n-2]
        .
        .
        .
a[-n]  -&gt;  a[1]
</code></pre>

<p><strong>End aside</strong></p>

<h3><span class="contents_item"><a href="#table_of_contents_23.6" id="contents_item_23.6">
23.6</a>
</span>A one-dimensional array is not a list and vice versa.</h3>

<p>Consider the following two Maple statements:</p>

<p>The first defines a 5-element 1D array:</p>

<pre><code>array1 := Array(1..5, [2, 3, 5, 7, 11]);

          array1 := [2, 3, 5, 7, 11]
</code></pre>

<p>The second defines a 5-element list:</p>

<pre><code>list1 := [2, 3, 5, 7, 11];

           list1 := [2, 3, 5, 7, 11]
</code></pre>

<p>In terms of what Maple outputs when we type in these 
two statements, the only way to distinguish the array <code>array1</code>
from the list <code>list1</code> is that the list elements are separated 
by commas.  However, when using command-line Maple, so are array
elements.  Also, since elements from both structures 
are referenced using <code>[ ]</code>, the indexing mechanism won't help us 
differentiate between the two either:</p>

<pre><code>&gt; array1[3];

                       5

&gt; list1[3];

                       5
</code></pre>

<p>However, we can always use the <code>type</code> command to sort out any confusion:</p>

<pre><code>&gt; type(array1, Array);

                     true

&gt; type(array1, list);

                     false

&gt; type(list1, list);

                     true

&gt; type(list1, Array);

                     false
</code></pre>

<p>Again, note that we must be careful to use the type name 
<code>Array</code> rather than <code>array</code>:</p>

<pre><code>&gt; type(array1, array);

                     false
</code></pre>

<p><strong>Wrapping up ...</strong></p>

<p>In the next lab we will look at a few basic procedures which
create and manipulate arrays (both 1D and 2D), and you will do 
some programming with them in the Maple homework assignment.</p>

<h2><span class="contents_item"><a href="#table_of_contents_24" id="contents_item_24">
24</a>
</span>myifC revisited</h2>

<p>Recall that the purpose of <code>myifC</code> (from last lab's exercise set) is 
to determine the largest (maximum) of its three arguments </p>

<p>Let's consider a version of this procedure, now called 
<a href="/Students/phys210/maple-code-solns/max3"><code>max3</code></a>,
which</p>

<p>Here is the definition of <code>max3</code>:</p>

<pre><code>############################################################
# Implementation of myifC, renamed max3, that illustrates
# use of code "factoring" via definition of "helper" 
# procedure, max2, which returns maximum of its TWO 
# arguments.
# 
# Coded this way, the correctness of the implementation
# is more manifest and the "gotcha" vis a vis the use 
# of &gt;= rather than &gt; does not arise.
############################################################

############################################################
# max2: returns maximum of two numeric values
############################################################
max2 := proc(x1::numeric, x2:: numeric)
  if x1 &gt; x2 then
     x1;
  else
     x2;
  end if;
end proc;

############################################################
# max2: using max2, returns maximum of three numeric values
############################################################
max3 := proc(x1::numeric, x2::numeric, x3::numeric)
  max2(max2(x1, x2), x3);
end proc;
</code></pre>

<p>Examine the testing code for <code>max3</code> that is defined in the 
file 
<a href="/Students/phys210/maple-code-solns/tmax3"><code>tmax3</code></a>
(it uses the <code>printf</code> command---which is 
a slightly advanced topic, see ?printf, or use the help menu for 
more information).</p>

<pre><code>############################################################
# "Exhaustive" testing of max3, using all permutations 
# of x1, x2, x3 chosen from 1, 2, 3
# 
# Checks routine using Maple's max command which will 
# accept an arbitrary number of arguments and return
# the maximum value among them.
###########################################################
read max3;

# Initialize a variable that will be used to count 
# the number of incorrect calculations.

n_incorrect := 0:

# Note the use of a triply nested for loop.

for x1 from 1 to 3 do
   for x2 from 1 to 3 do
      for x3 from 1 to 3 do
         max3_result := max3(x1, x2, x3);
         max_result  := max(x1, x2, x3);
         if max3_result &lt;&gt; max_result then
            n_incorrect := n_incorrect + 1;
         end if;
         printf("max3(%a,%a,%a)=%a  max(%a,%a,%a)=%a\n", 
            x1, x2, x3, max3_result,
            x1, x2, x3, max_result);
      end do;
   end do;
end do;
printf("\nNumber of incorrect calculations: %a\n", n_incorrect);
</code></pre>

<p>From within the directory <code>~phys210/maplesolns</code>, start a Maple session 
(command-line Maple) and read <code>tmax3</code></p>

<pre><code>% cd ~phys210/maplesolns
% maple

&gt; read tmax3;
</code></pre>

<p>What does the output tell you?</p>

<p>Now read 
<a href="/Students/phys210/maple-code-solns/tmyifCbad"><code>tmyifCbad</code></a>,
and examine the output carefully, comparing to 
that from <code>tmax3</code> ... What's the difference?</p>

<pre><code>&gt; read tmyifCbad;
</code></pre>

<p>Now, look at the definition of 
<a href="/Students/phys210/maple-code-solns/myifCbad"><code>myifCbad</code></a>,
and, referring to the 
output from <code>tmyifCbad</code>, isolate the conceptual (logical) error in 
<code>myifCbad</code>.  Recall that you can display the definition of <code>myifCbad</code>
from within your Maple session using</p>

<pre><code>&gt; op(myifCbad);
</code></pre>

<h2><span class="contents_item"><a href="#table_of_contents_25" id="contents_item_25">
25</a>
</span>EXERCISES: Using <code>for</code> statements</h2>

<h3><span class="contents_item"><a href="#table_of_contents_25.1" id="contents_item_25.1">
25.1</a>
</span>EXERCISE 1: <code>mysum</code></h3>

<p>In the file <code>~/maplepgm/myprocs3</code> create the the procedure mysum
as follows:</p>

<pre><code>mysum := proc( ... you fill in the rest ... )
</code></pre>

<ol>
<li><p>Takes a single argument, n which must be an integer (use type-checking).</p></li>
<li><p>Uses a <code>for</code> loop to compute and return the sum of the integers from 
1 to n.</p></li>
<li><p>The procedure should check that <code>n</code> is larger than or equal to 1; if 
it isn't, it should use the <code>error</code> statement to output an appropriate 
message and exit (note that calling <code>error</code> <em>will</em> cause the procedure
to exit, i.e. there's nothing else that you need to do to have the 
procedure immediately quit but call <code>error</code>).</p></li>
</ol>

<p>Create a testing file for mysum called <code>tmysum</code> as follows:</p>

<ol>
<li>The first line should be <code>read myprocs3;</code></li>
<li>Subsequent lines should call <code>mysum</code> with various arguments, valid
as well as invalid: if you wish, use <code>print</code> or <code>printf</code> statements to document 
what is being supplied as the input.</li>
<li>Use <code>read tmysum</code> to read the testing commands you define in the 
file into Maple, and thus do the testing per se.</li>
<li>Continue modifying <code>myprocs3</code> and or <code>tmysum</code> until you are 
satisfied that your implementation is correct. </li>
<li>If possible, show your results to one of us.</li>
</ol>

<p>You can use <code>myfactorial</code> as a guide, but you should implement (i.e. type 
<em>without</em> copy and paste) the whole procedure yourself.</p>

<p>Finally, 
please code according to the instructions given above, even if you know of 
or find a more direct way to code the procedure than using a 
<code>for</code> loop!  The point of this exercise is to provide practice using 
<code>for</code> loops!</p>

<h3><span class="contents_item"><a href="#table_of_contents_25.2" id="contents_item_25.2">
25.2</a>
</span>EXERCISE 2: <code>tmyifC</code></h3>

<p>To complete this exercise you must have finished your implementation
of <code>myifC</code> from the previous lab.  If you haven't yet done this, do 
so now, and try to do it without looking at the solution that I 
have provided. </p>

<p>Execute the following at the bash command-line:</p>

<pre><code>% cd
% cd maplepgm
% cp ~phys210/maplesolns/tmyifCbad tmyifC
</code></pre>

<p>Now, edit the file 
<code>tmyifC</code>
and modify it so that:</p>

<ol>
<li>It reads the definitions of the procedures that you wrote in the last 
lab: recall that those were to be defined in the file <code>procs2</code>.</li>
<li>It calls (and thus tests) <code>myifC</code>, rather than <code>myifCbad</code>, within the 
triply-nested <code>for</code> loop.</li>
<li>The <code>printf</code> statements reflect the fact that you are testing 
<code>myifC</code> and not <code>myifCbad</code>.</li>
</ol>

<p>As usual when creating any file containing source code, be sure to 
save <code>tmyifC</code> every time you have made a set of modifications.</p>

<p>Start xmaple from <code>~/maplepgm</code>, read <code>tmyifC</code>, and verify that 
your implementation appears to be correct.  If the testing fails (and 
assuming that you haven't messed up the testing procedure), try 
to debug your implementation, asking for help as necessary.</p>

<h2><span class="contents_item"><a href="#table_of_contents_26" id="contents_item_26">
26</a>
</span>Free time to work on homework, discuss term projects</h2>

<p><strong>IMPORTANT NOTES</strong> </p>

<ul>
<li><p>I have updated the reference list at the top of these notes.  </p></li>
<li><p>In particular, I have added a link to the Maple 7 
Programming Guide (2001): the first two chapters of this 
reference provide a better <em>introduction</em> to Maple programming, 
relative to the more recent guide, especially for novices.</p></li>
<li><p>We will not have sufficient time in the labs to go through 
all of this material in detail, and some sections may have 
to be omitted altogether.  Nonetheless, you should not consider 
what we skip to be irrelevant, especially for completion 
of the current homework.</p></li>
</ul>

<p>You are thus <em>strongly</em>  advised to go through what we don't 
cover together by yourself, ideally while running a Maple session
so that you try the examples and variants for themselves.</p>

<ul>
<li>Similarly, there are several "asides" in these notes that I 
will definitely not cover due to time constraints.  These are to 
be viewed as the equivalent of footnotes: not essential for the main 
development, but of interest/pertinence nonetheless. I recommend that you 
read through them at some point.  Search for <em>aside</em> with 
your browser.</li>
</ul>

<h2><span class="contents_item"><a href="#table_of_contents_27" id="contents_item_27">
27</a>
</span>Sample solution to the <code>mysum</code> exercise from previous lab</h2>

<p>Can be found in</p>

<pre><code>~phys210/maplesolns/myprocs3soln
~phys210/maplesolns/tmysumsoln
</code></pre>

<p>Also available <a href="http://laplace.phas.ubc.ca/Students/phys210/maple-code-solns/myprocs3soln"><strong>HERE (<code>myprocs3soln</code>)</strong></a> 
and <a href="http://laplace.phas.ubc.ca/Students/phys210/maple-code-solns/tmysumsoln"><strong>HERE (<code>tmysumsoln</code>)</strong></a>.</p>

<p>Try my testing script &amp; solution using command-line Maple:</p>

<pre><code>% cd ~phys210/maplesolns
% maple

&gt; read tmysumsoln;

tmysumsoln: Checking mysum with valid input ...

mysum(1)=1  sum(1)=1  difference=0
mysum(2)=3  sum(2)=3  difference=0
mysum(3)=6  sum(3)=6  difference=0
mysum(10)=55  sum(10)=55  difference=0

tmysumsoln: Checking mysum with invalid input ...

tmysumsoln: Note that since the error command is activated in all of 
these instances, the value of 'val_mysum', displayed as 
'mysum(...)=&lt;val_mysum&gt;', remains unchanged.

Error, (in mysum) input argument 'n' must be &gt;= 1

mysum(0)=55

Error, (in mysum) input argument 'n' must be &gt;= 1

mysum(-1)=55

Error, invalid input: mysum expects its 1st argument, n, to be 
of type integer, but received x

mysum(x)=55

Error, invalid input: mysum expects its 1st argument, n, to be 
of type integer, but received 1.0

mysum(1.0)=55
</code></pre>

<p>Exit the command-line Maple session.</p>

<pre><code>&gt; quit;
</code></pre>

<p>or</p>

<pre><code>&gt; Ctrl-d
</code></pre>

<p>(<em>not</em> <code>Ctrl-z</code> or <code>Ctrl-c</code>)</p>

<h2><span class="contents_item"><a href="#table_of_contents_28" id="contents_item_28">
28</a>
</span>Important: change of setup</h2>

<p>Change your working directory to <code>~/maplepgm</code> and, as we did last day, recopy 
the files from ~phys210/maplepgm, not worrying about overwriting existing
files:</p>

<pre><code>% cd
% cd maplepgm
% pwd
/home2/phys210f/maplepgm

% CP ~phys210/maplepgm/* .
</code></pre>

<p>Get a listing, and you should see all of the following files (and 
more if you have done the exercises):</p>

<pre><code>% ls

err1   glob   imp         loc   locbad       procs   tladd         tprocs
errif  glob1  index.html  loc1  printf_demo  procs2  tprintf_demo  tprocs2
</code></pre>

<p>Then start <code>xmaple</code> in the background from the command line:</p>

<pre><code>% cd ~/maplepgm
% xmaple &amp;
</code></pre>

<p>Point your browser (preferably a separate tab)
<a href="http://laplace.phas.ubc.ca/Students/phys210/maple-code/"><strong>HERE</strong></a>
so that you can see the contents of 
the various source files that we will be using.</p>

<p>Read the file <code>procs2</code> into your <code>xmaple</code> session</p>

<pre><code>&gt; read procs2;
</code></pre>

<h2><span class="contents_item"><a href="#table_of_contents_29" id="contents_item_29">
29</a>
</span>The <code>trace</code> statement: tracing execution of a procedure</h2>

<p>Maple provides a simple yet powerful "tracing" facility that allows 
one to see the input value of arguments to procedures, the values
returned by any of the statements executed in the procedure, and 
the return value from the procedure.</p>

<p>This is a very useful feature that allows us to see what is happening 
"inside" a procedure and thus for debugging the procedure, once 
syntax errors have been removed.</p>

<p><strong>IMPORTANT</strong></p>

<p>In order to get full tracing information, ensure that 
every statement uses the <code>;</code> as a terminator, if <code>:</code> is used (recall
that <code>:</code> suppresses output), then the tracing info for that 
statement will <em>NOT</em> appear.</p>

<p>Thus, recommended coding practice is to use semi-colons to terminate
each statement while you are developing and debugging code.  You 
can then convert any/all of them to colons to suppress any 
unwanted output as necessary.  This need not be done manually: your 
text editor has a facility to do global search and replace.  Ask 
for help if you can't figure out how to do it.</p>

<p><strong>Syntax</strong></p>

<pre><code>trace(&lt;procedure name&gt;);
untrace(&lt;procedure name&gt;);
</code></pre>

<ul>
<li><code>trace</code> turns on tracing of <code>&lt;procedure name&gt;</code></li>
<li><code>untrace</code> turns off tracing of <code>&lt;procedure name&gt;</code></li>
</ul>

<p>Example:</p>

<pre><code>&gt; trace(myfactorial);
                       myfactorial
</code></pre>

<p>Note how <code>trace</code> echoes the name of the procedure ... if you mistype
the procedure name, or otherwise pass it an argument that is <strong>NOT</strong> the 
name of the procedure, it will not echo anything.  For example:</p>

<pre><code>&gt; trace(myfctorial);
&gt;
</code></pre>

<p>Now let's see how the tracing works ...</p>

<pre><code>&gt; myfactorial(4);

{--&gt; enter myfactorial, args = 4
                               val := 1

                               val := 2

                               val := 6

                               val := 24

                                  24

&lt;-- exit myfactorial (now at top level) = 24}
                                  24
</code></pre>

<p>o Now turn off tracing, and execute the same call to <code>myfactorial</code>:</p>

<pre><code>&gt; untrace(myfactorial);
                               myfactorial

&gt; myfactorial(4);
                                  24
</code></pre>

<p><strong>IMPORTANT</strong></p>

<p>You can enable tracing for <em>any</em> procedure that you write, but 
the facility is only useful once <em>all</em> syntax errors have been eradicated.</p>

<p><strong>IMPORTANT</strong> </p>

<p>Here is the recommended practice for use of <code>trace</code> when 
implementing procedures in a source file.  </p>

<p>For the sake of concreteness assume that we are coding a procedure
<code>myproc</code> in a source file also called <code>myproc</code>.  Then include the 
<code>trace</code> statement <em>in the file</em> and <strong>FOLLOWING</strong> the definition of the 
procedure:</p>

<pre><code>myproc := proc( ... )
     .
     .
     .
end proc;

trace(myproc);
</code></pre>

<p>This ordering is <em>crucial</em> since every time a procedure is redefined---which,
assuming that we haven't introduced any syntax errors into the 
procedure code, happens every time we re-read the source file---Maple 
will effectively execute <code>untrace</code> for that procedure (i.e. turn tracing off).  </p>

<p>Thus, placing 
the <code>trace</code> command after the end of the procedure definition ensures 
that tracing remains enabled.</p>

<p>Also note that you can then disable tracing by "commenting out" 
the <code>trace</code> command; i.e. insert # before the command:</p>

<pre><code>#trace(myproc);
</code></pre>

<p>and re-enable as necessary by deleting the #.</p>

<h3><span class="contents_item"><a href="#table_of_contents_29.1" id="contents_item_29.1">
29.1</a>
</span>Remark: Commenting-out code</h3>

<p>Here I should point out that if you look at a lot of code that various 
programmers write---experts and non-experts alike---you will frequently
see code that has been "commented out" (disabled).  </p>

<p>In general, this is <em>not</em> a good habit to develop.  It tends to make 
the code difficult to read and understand, and eventually you will 
forget to comment out a line that you meant to, or comment out one 
that you didn't want to and will waste a lot of time trying to 
figure out what went wrong.</p>

<p>However, in instances like this, where we are simply enabling/disabling 
a debugging feature with a single character, it's difficult to 
argue that it's bad practice.  </p>

<p>Indeed, any self-respecting programmer will be able to deduce what's 
going on if she/he encounters a line like</p>

<pre><code>#trace(myproc)
</code></pre>

<p>in a source file.</p>

<h2><span class="contents_item"><a href="#table_of_contents_30" id="contents_item_30">
30</a>
</span>Sample procedures that manipulate lists.</h2>

<h3><span class="contents_item"><a href="#table_of_contents_30.1" id="contents_item_30.1">
30.1</a>
</span>The NULL sequence and empty list.</h3>

<p>Maple has a unique special value that denotes "nothing", and which we have 
already encountered in the context of the <code>print</code> statement, which 
returns it.  The protected name <code>NULL</code> is set to this value, and 
can be used in various contexts where one needs an "empty" expression.</p>

<p>One such instance that will be useful for us occurs when we wish 
to initialize a variable that will be used to "build up a 
sequence".</p>

<p>For example, suppose we want to construct the sequence</p>

<pre><code>1, 8, tan(y), Pi
</code></pre>

<p>step by step, by adding one element at each step, and maintain
it in the variable, <code>s</code>.  If <code>s</code> already has a value that is 
part of the sequence, e.g ...</p>

<pre><code>&gt; s;

    1, 8
</code></pre>

<p>... then it is easy to add the next element with the statement</p>

<pre><code>&gt; s := s , tan(y);
</code></pre>

<p>However, if we try to <em>start</em> this process with the statement</p>

<pre><code>&gt; s := s , 1;
</code></pre>

<p>when <code>s</code> does not yet have a value, then Maple will complain:</p>

<pre><code>Error, recursive assignment
</code></pre>

<p>The solution is to initialize <code>s</code> with NULL, which we can thus 
view as the <em>null sequence</em> or <em>empty sequence</em>.</p>

<pre><code>&gt; s := NULL;

    s := 

&gt; s := s , 1

    s := 1

&gt; s := s , 8

    s := 1 , 8
</code></pre>

<p>Similarly, there is a unique special list, denoted <code>[]</code> 
which has no elements, and which is known as the <em>empty list</em>. 
If you enter this expression at the command line, Maple will
echo it:</p>

<pre><code>&gt; [];
       []
</code></pre>

<p>We can verify that it has no elements using the 
<code>nops</code> command:</p>

<pre><code>&gt; nops( [] );

        0
</code></pre>

<p>Since <code>NULL</code> is the unique empty sequence and <code>[]</code> is the 
unique empty list, <code>[]</code> and <code>[NULL]</code> must be the same 
entity.  We can verify this assertion with <code>evalb</code>:</p>

<pre><code>&gt; evalb([] = [NULL]);

        true
</code></pre>

<p><strong>IMPORTANT</strong></p>

<p>First, exit your current <code>xmaple</code> session.</p>

<p>Now, let's implement the following procedure ...</p>

<pre><code>Header: 

    ladd := proc(l1::list(algebraic), l2::list(algebraic))

Function:  

    Given two equal-length lists of algebraic quantities,
    returns a list whose elements are the sums of the corresponding
    elements of the input lists 

Sample usage:

    &gt; ladd( [10, 20, 30, 40], [-1, -2, -3, -4] );

            [9, 18, 27, 36]

    &gt; ladd( [1, 2, 3, 4], [a, b, c, d] );

        [1 + a, 2 + b, 3 + c, 4 + d]
</code></pre>

<p>In a terminal window, <code>cd</code> to <code>~/maplepgm</code> and restart <code>xmaple</code> from the 
bash command line:</p>

<pre><code>% cd
% cd maplepgm
% pwd
/home2/phys210f/maplepgm

% xmaple &amp;
</code></pre>

<p>Using your text editor, and also working in the directory <code>~/maplepgm</code>, 
we will create two text files:</p>

<ol>
<li><code>tladd</code>:  The testing script (our scaffolding)</li>
<li><code>ladd</code>:  The source file defining the procedure (our gleaming condo
tower)</li>
</ol>

<h3><span class="contents_item"><a href="#table_of_contents_30.2" id="contents_item_30.2">
30.2</a>
</span>GROUP EXERCISE: Implementing <code>tladd</code> and <code>ladd</code></h3>

<p>We will create <code>tladd</code> and <code>ladd</code> together.  Open 
two editing sessions, both  with working directory </p>

<pre><code>~/maplepgm
</code></pre>

<p>create and save the two files </p>

<pre><code>tladd
ladd
</code></pre>

<p>and let's start typing.  Once we get going, the only thing 
that we will be executing at the Maple command line is</p>

<pre><code>&gt; read tladd;
</code></pre>

<p><strong>REPEATING</strong></p>

<p>Make sure you have <strong>two</strong> editor windows open, one 
editing the file</p>

<pre><code>~/maplepgm/tladd
</code></pre>

<p>and the other editing</p>

<pre><code>~/maplepgm/tladd
</code></pre>

<p>As usual, ask for help <em>immediately</em> should you be experiencing
difficulties getting things set up properly.</p>

<p><strong>NOT A TRICK QUESTION</strong></p>

<blockquote>
  <p><em>Which file should we start with: <code>ladd</code> or <code>tladd</code>?</em></p>
</blockquote>

<p><strong>INTERLUDE WHILE WE WORK THE PROBLEM TOGETHER</strong></p>

<p><strong>IMPORTANT</strong></p>

<p>Exit xmaple, then restart it, ensuring that the working 
directory is still <code>~/maplepgm</code>.</p>

<pre><code>% cd ~/maplepgm
% pwd
/home2/phys210f/maplepgm
% xmaple &amp;
</code></pre>

<p>Input the procedure definitions from <code>procs2</code></p>

<pre><code>&gt; read procs2;
</code></pre>

<h3><span class="contents_item"><a href="#table_of_contents_30.3" id="contents_item_30.3">
30.3</a>
</span><code>lpair</code> and <code>ljoin</code></h3>

<p>Let's look at the definitions of another 2 procedures that manipulate
lists, the first of which illustrates the technique of building up
a <em>list</em> by building up the corresponding <em>sequence</em>, and the converting
the <em>sequence</em> to a <em>list</em> simply by enclosing it in square brackets.</p>

<pre><code>Procedure: 

    lpair:

Header: 

    lpair := proc(l1::list, l2::list)

Function: 

    Returns list whose elements are 2-element lists containing 
    corresponding elements of list arguments `l1` and `l2`.

Sample Invocations

      &gt; lpair( [1, 2], [a, b] );

                   [[1, a], [2, b>>

      &gt; lpair( [u, v, w, [x, y>>, [[a, b], c, d, e] );

              [[u, [a, b>>, [v, c], [w, d], [[x, y], e>>

      &gt; lpair( [1, 2, 3], [a, b] );

        Invalid, since input lists are not of the same length
</code></pre>

<p>Here's my definition ...</p>

<pre><code>########################################################################
#  Returns list whose elements are 2-element lists containing 
#  corresponding elements of list arguments.  
# 
#  Again uses the trick that sequences are easier to build up than 
#  lists.
########################################################################

lpair := proc(l1::list, l2::list)
   local s, i;

   if nops(l1) &lt;&gt; nops(l2) then 
      error "Input lists are not of equal length";
   end if;

   # Initialize the sequence
   s := NULL;

   # Build up a sequence of two element lists
   for i from 1 to nops(l1) do
      s := s , [l1[i],l2[i>>;
   end do;

   # Convert the sequence to a list, and return the list.
   [s];
end proc;
</code></pre>

<p>Test procedure, with both valid and invalid input</p>

<pre><code>&gt;  lpair( [1, 2], [a, b] );

                           [[1, a], [2, b>>


&gt; lpair( [ [1, 2], 3, 4], [a, [b, c], d] );

                  [[[1, 2], a], [3, [b, c>>, [4, d>>

&gt; lpair( [], [] );

                                  []

&gt; lpair( [1, 2, 3], [a, b] );

Error, (in lpair) Input lists are not of equal length

&gt; lpair(1, [a, b, c] );

Error, invalid input: lpair expects its 1st argument, l1, to be of type list,
but received 1
</code></pre>

<p>Try a call with tracing enabled:</p>

<pre><code>&gt; trace(lpair);
                     lpair

&gt; lpair( [1, 2, 3], [a, b, c] );
    {--&gt; enter lpair, args = [1, 2, 3], [a, b, c]
                                 s :=

                              s := [1, a]

                          s := [1, a], [2, b]

                      s := [1, a], [2, b], [3, c]

                       [[1, a], [2, b], [3, c>>

&lt;-- exit lpair (now at top level) = [[1, a], [2, b], [3, c>>}
                       [[1, a], [2, b], [3, c>>
</code></pre>

<p>Turn off the tracing, and execute the same call.</p>

<pre><code>&gt; untrace(lpair);

&gt; lpair( [1, 2, 3], [a, b, c] );

                       [[1, a], [2, b], [3, c>>
</code></pre>

<p>Let's move on to the last example of a list-manipulating procedure:</p>

<pre><code>Procedure: 

    ljoin:

Header: 

    ljoin := proc(l1::list, l2::list)

Function: 

    Returns list whose elements are those of `l1` followed
    by those of `l2`.

Sample Invocations

    &gt; ljoin( [1, 2, 3, 4], [a, b, c, d] );

    &gt; ljoin( [1, 2, 3, 4], [a, b, [d, e>> );

    &gt; ljoin( [], [w, x, y] );

    &gt; ljoin( [w, x, y], [] );

    &gt; ljoin( [], [] );
</code></pre>

<p>Here's my implementation ...</p>

<pre><code>########################################################################
# Returns list whose elements are those of 'l1' followed by those
# of 'l2'.  
# 
# Can be written in a very compact form using the fact that 
# l[] converts the list 'l' into a sequence with the same elements
########################################################################

ljoin := proc(l1::list, l2::list)
   [ l1[], l2[] ];
end proc;
</code></pre>

<p>Try a couple of calls ...</p>

<pre><code>&gt; ljoin( [1, 2, 3, 4], [a, b, c, d] );

           [1, 2, 3, 4, a, b, c, d]

&gt; ljoin( [], [w, x, y] );

                   [w, x, y]


&gt; ljoin( [foo], bar );

Error, invalid input: ljoin expects its 2nd argument, l2, 
to be of type list, but received bar 
</code></pre>

<h2><span class="contents_item"><a href="#table_of_contents_31" id="contents_item_31">
31</a>
</span>Maple arrays 2: Two dimensional arrays</h2>

<p>In the previous lab I introduced you to one-dimensional (1D) 
Maple arrays.  Here we will take a similarly quick look at
two-dimensional (2D) arrays, and then examine a couple of 
example procedures that create and manipulate arrays:
one for each dimensionality.  You will need to code similar 
procedures for the current homework.</p>

<p>As mentioned previously, when thinking about arrays of scalar 
values---which is what we are restricting attention 
to here---in Maple, or Matlab, or many other programming languages,
it can be useful to relate to things that you may be 
more familiar with:</p>

<pre><code>1D array        -&gt;   A row or column of cells in a spreadsheet.

1D array        -&gt;   A vector of values, as often encountered in
                     mathematics or physics.


2D array        -&gt;   A rectangular collection of cells in a spreadsheet.

2D array        -&gt;   A matrix of values, as often encountered in
                     mathematics or physics.
</code></pre>

<p>The key distinction between  1D and 2D arrays,
and  arbitrary-dimensional arrays for that matter, is the number of 
indexes that are required to specify (select) a particular element:</p>

<pre><code>Dimensionality     Number of Indices       Maple Syntax

     1                     1                d1[i];
     2                     2                d2[i, j];
     3                     3                d3[i, j, k];

                           .
                           .
                           .
</code></pre>

<p><strong>BEGIN ASIDE</strong></p>

<p>Note that in Maple we can in fact use one of 
two distinct syntaxes to index a 2D array:</p>

<pre><code>d2[i, j]
</code></pre>

<p>or </p>

<pre><code>d2[i][j]
</code></pre>

<p>I will use the former here and in my sample code, and I recommend
that you do the same not least since that's the style that <em>must</em> be used 
in Matlab.</p>

<p><strong>END ASIDE</strong></p>

<p>As in the 1D case, when we refer to an element of a 2D array:</p>

<pre><code>d2[&lt;index1&gt;, &lt;index2&gt;]
</code></pre>

<p>we need to ensure that:</p>

<ol>
<li><code>&lt;index1&gt;</code> and <code>&lt;index2&gt;</code> are both of type <code>integer</code></li>
<li><code>&lt;index1&gt;</code> and <code>&lt;index2&gt;</code> are within the ranges of their 
respective dimensions.</li>
</ol>

<h3><span class="contents_item"><a href="#table_of_contents_31.1" id="contents_item_31.1">
31.1</a>
</span>Defining 2D arrays: The <code>Array</code> command.</h3>

<p>The general syntax for defining (creating)  a 2D array of <em>size</em> 
<code>&lt;m&gt;</code> by <code>&lt;n&gt;</code> (think <code>&lt;m&gt;</code> by <code>&lt;n&gt;</code> matrix),
with indexes that range </p>

<ol>
<li>From <code>1</code> through <code>&lt;m&gt;</code> inclusive in the first dimension.</li>
<li>From <code>1</code> through <code>&lt;n&gt;</code> inclusive in the second dimension.</li>
</ol>

<p>and assigning it to a variable <code>&lt;arrayvar&gt;</code> is</p>

<pre><code>&lt;arrayvar&gt; := Array(1..&lt;m&gt;, 1..&lt;n&gt;);
</code></pre>

<p>Note that we use the same command, <code>Array</code>, to create both 1D and 
2D arrays (and, in general, 3D, 4D, ... ones), but for the 2D
case we need to provide a minimum of <em>two</em> arguments: a range for 
each dimension.</p>

<p>Here's a specific example:</p>

<pre><code>&gt; m1 := Array(1..3, 1..5);


               [0    0    0    0    0]
               [                     ]
         m1 := [0    0    0    0    0]
               [                     ]
               [0    0    0    0    0]
</code></pre>

<p>This statement creates a 3 x 5 array (3 rows, 5 columns) with all values 
initialized to 0.  Again, the initialization with 0 is the default 
mode for creation of an array in <em>any</em> dimension.</p>

<p><strong>BEGIN ASIDE</strong></p>

<p>Confusingly, one often encounters
the terminology "the dimensions of an array", which in 
the language we are using actually means "the number of 
integers in the ranges associated with each dimension of the array".</p>

<p>The key hint that the confusing terminology is in play is the 
use of the plural form of "dimensions".</p>

<p>For example, adopting the confusing terminology, I would say that 
"<code>m1</code> has dimensions 3, 5" or "<code>m1</code> has dimensions 3 x 5".  </p>

<p>I will do my best to stick to the term <em>size</em>, rather than
<em>dimensions</em>, which has the benefit of conforming to Matlab lingo.
It is quite possible, however, that I will slip up from time to 
time!</p>

<p><strong>END ASIDE</strong></p>

<p>As in the 1D case, Maple will display the values of 
an array in-line if all of the array's index ranges 
span 10 integers or fewer (25 if we're using command-line
Maple).  Thus, we see all the elements for</p>

<pre><code>&gt; m10 := Array(1..10, 1..10);
</code></pre>

<p>(I won't display the here), but anything bigger gets displayed in the 
summary format we saw in the 1D discussion:</p>

<pre><code>&gt; m11 := Array(1..11, 1..11);

                 [ 1..11 x 1..11 2-D Array ]
          m26 := [ Data Type: anything     ]
                 [ Storage: rectangular    ]
                 [ Order: Fortran_order    ]
</code></pre>

<p>Again, if we are using xmaple
we can then double-click on the summary (within the square brackets) to 
pop up an array-browsing window.</p>

<h3><span class="contents_item"><a href="#table_of_contents_31.2" id="contents_item_31.2">
31.2</a>
</span>Initializing 2D arrays with arbitrary values</h3>

<p>I'll consider this topic before moving to the more basic concept of 
accessing individual elements of a 2D array so that we can actually
have some non-zero array elements to play with.  </p>

<p>Just as we can initialize a 1D array by supplying a <em>list</em> of 
values as the argument following the <em>single</em> range specification,
we can initialize a 2D array by providing a <em>list of lists</em> 
as the argument after the <em>two</em> range specifications. </p>

<p>For example:</p>

<pre><code>&gt; A := Array( 1..2, 1..4, [ [2, 3, 5, 7], [11, 13, 17, 19] ] );

                  [ 2     3     5     7]
             A := [                    ]
                  [11    13    17    19]
</code></pre>

<p>Notice that <code>A</code> is a 2 x 4 array: i.e. it has 2 rows and 4 
columns.  The list of lists with values:</p>

<pre><code>[ [2, 3, 5, 7], [11, 13, 17, 19] ] 
</code></pre>

<p>does the initialization <em>row by row</em> and I have to be very careful
to construct the list of lists so that:</p>

<ol>
<li>It has the right number of sublists: 2, the number of rows.</li>
<li>Each sublist has the correct length: 4, the number of columns.</li>
</ol>

<p><strong>BEGIN ASIDE</strong></p>

<p>In particular, you might think I could get away with dropping
the inner brackets.  However, if I do this, something quite unexpected 
happens.</p>

<pre><code>A_bad1 := Array( 1..2, 1..4, [ 2, 3, 5, 7, 11, 13, 17, 19] );

                       [2    0    0    0]
             A_bad1 := [                ]
                       [3    0    0    0]
</code></pre>

<p>This doesn't work either ...</p>

<pre><code>A_bad2 := Array( 1..2, 1..4, [ [2, 3], [5, 7], [11, 13], [17, 19] ] );

                       [2    3    0    0]
             A_bad2 := [                ]
                       [5    7    0    0]
</code></pre>

<p>You will note that in both cases the first few values in the list, or 
lists of lists, are inserted "column-wise" rather than "row-wise". <br/>
This is a reflection of <em>Fortran storage order</em> which we will also 
encounter, at least tangentially, in our study of Matlab.</p>

<p><strong>END ASIDE</strong></p>

<h3><span class="contents_item"><a href="#table_of_contents_31.3" id="contents_item_31.3">
31.3</a>
</span>Accessing elements of a 2D array</h3>

<p>Now that we have our 2D array, <code>A</code>, nicely initialized we can use
indexing to reference particular elements.  Again, we must use 
<em>two</em> indices, the first specifies the row, the second the column.</p>

<p>Thus, we have, for example:</p>

<pre><code>&gt; A[1,1];

                               2

&gt; A[2,4];
                              19
</code></pre>

<p>We can use an in-line nested <code>for</code> loop structure to display all the 
elements one by one.  Here I'm going to "cheat" and take advantage
of the fact that <code>for i to &lt;n&gt;</code> is Maple shorthand <code>for i from to &lt;n&gt;</code>.</p>

<pre><code>&gt; for i to 2 do for j to 4 do print(A[i,j]); end do; end do;

                               2

                               3

                               5

                               7

                              11

                              13

                              17

                              19
</code></pre>

<p>This enumerates the elements row by row, so called <em>row major order</em>.  We can 
just as easily display the values in <em>column major order</em> by switching 
the order of the <code>for ... do</code> statements:</p>

<pre><code>&gt; for j to 4 do for i to 2 do print(A[i,j]); end do; end do;

                               2

                              11

                               3

                              13

                               5

                              17

                               7

                              19
</code></pre>

<p>The array indexes don't have to be constant: as long as the indexing 
expressions evaluate to integers within the appropriate ranges the 
element selection is valid:</p>

<pre><code>&gt; ii := 1: jj := 2:

&gt; A[jj-ii, jj+ii];

                               5
</code></pre>

<p>We can assign values to individual array elements in the expected 
manner:</p>

<pre><code>&gt; A[2, 1] := 100;

                    A[2, 1] := 100

&gt; A[1, 2] := -100;

                    A[1, 2] := -100
</code></pre>

<p>Again, the output in these notes was generated using command-line
Maple.  Within xmaple we see that the output is "pretty printed"
using the "double subscript" form of the indexes labelling the 
element.</p>

<p>What does the entire array look like now?</p>

<pre><code>&gt; A;

               [  2    -100     5     7]
               [                       ]
               [100      13    17    19]
</code></pre>

<p>And once more, what appears on the right hand side of the 
assignment of a single array element can be an arbitrary Maple
expression:</p>

<pre><code>&gt; A[2,3] := A[1,2] + A[2,1] + A[2,2]*[2,4];

                A[2, 3] := 247
</code></pre>

<h3><span class="contents_item"><a href="#table_of_contents_31.4" id="contents_item_31.4">
31.4</a>
</span>Initializing 2D arrays with a constant value</h3>

<p>Here we supply the <code>fill</code> option to the <code>Array</code> command. For example:</p>

<pre><code>&gt; ones4 := Array(1..4, 1..4, fill=1);

                   [1    1    1    1]
                   [                ]
                   [1    1    1    1]
          ones4 := [                ]
                   [1    1    1    1]
                   [                ]
                   [1    1    1    1]
</code></pre>

<h3><span class="contents_item"><a href="#table_of_contents_31.5" id="contents_item_31.5">
31.5</a>
</span>Out-of-range indexes.</h3>

<p>Again, the rules for indexing are the same as they were for the 
1D case, and thus the error messages that we will see when 
we violate those rules are also the same.</p>

<pre><code>&gt; ones4[0, 1];

Error, Array index out of range

&gt; ones4[5, 1];

Error, Array index out of range

&gt; ones4[1, 5];

Error, Array index out of range

&gt; ones4[0.5, 4];

Error, bad index into Array

&gt; ones4[x, y];

Error, bad index into Array
</code></pre>

<p>Note, in particular, that Maple doesn't tell us <em>which</em> index/indexes
is/are flawed, just that at least one of them is.</p>

<h3><span class="contents_item"><a href="#table_of_contents_31.6" id="contents_item_31.6">
31.6</a>
</span>A two-dimensional array is not a list-of-lists and vice versa.</h3>

<p>Consider the following (again, the output here is from command-line
Maple, we see a different form in xmaple):</p>

<pre><code>&gt; array2d := Array(1..2, 1..3, [[11, 12, 13], [21, 22, 23>>);

                   [11    12    13]
        array2d := [              ]
                   [21    22    23]



&gt; list2d := [[11, 12, 13], [21, 22, 23>>;

        list2d := [[11, 12, 13], [21, 22, 23>>
</code></pre>

<p>Although these two objects may seem to be the same kind of beast,
they are not.  Once more, we can use <code>type</code> to definitively determine 
whether the expression in question is an array or  a list.</p>

<pre><code>&gt; type(array2d, Array);

           true

&gt; type(array2d, list);

           false

&gt; type(list2d, list);

           true

&gt; type(list2d, listlist);

           true

&gt; type(list2d, Array);

           false
</code></pre>

<p><strong>BEGIN ASIDE</strong></p>

<p>If we want to do "serious" work in Maple with a structured, rectangular
collection of elements---especially if the index ranges are large 
(i.e. so that there is a large number of elements)---then an array
is probably the best choice.  </p>

<p>A main reason for this is that lists are <em>immutable</em> objects in Maple.
That is once created, the elements of a list can <em>not</em> be changed.
When I execute a statement sequence such as ...</p>

<pre><code>&gt; l1 := [1, 2, 3, 4];

        l1 := [1, 2, 3, 4]

&gt; l1;

        [1, 2, 3, 4]

&gt; l1[2] := 0;

        l1[2] := 0

&gt; l1; 

        [1, 0, 3, 4]
</code></pre>

<p>... the assignment <code>l1[2] := 0</code> forces Maple to </p>

<ol>
<li>Make a <em>copy</em> of the original list <code>[1, 2, 3, 4]</code> that 
was constructed in-place and assigned to the name <code>l1</code>.</li>
<li>Change the 2nd value of the copy to <code>0</code>.</li>
<li>"Finalize" the creation of the <em>new</em> list, <code>[1, 0, 3, 4]</code>.</li>
<li>Assign the new list to the name <code>l1</code>, thus disassociating <code>l1</code>
from the first list.</li>
</ol>

<p>As you might suspect, the fact that a new list must be created 
every time we want to modify the value of a specific element leads 
to serious inefficiencies for large numbers of elements.</p>

<p>On the other hand, when we create an <code>Array</code> in Maple and 
assign it to a name:</p>

<pre><code>&gt; a1 := Array(1..5, [1949, 1951, 1955, 1959, 1961]);

         a1 := [1949, 1951, 1955, 1959, 1961]
</code></pre>

<p>then what is assigned to the name--<code>a1</code> in this case---is what 
is known as a <em>pointer</em> to the array, i.e. (and loosely
speaking) a reference to the <em>location</em> in computer memory 
where the storage for the array starts.  </p>

<p>Thus, if I now "copy" the array to the name <code>a2</code> ...</p>

<pre><code>&gt; a2 := a1;

        a2 := [1949, 1951, 1955, 1959, 1961]
</code></pre>

<p>...  the only thing I have copied is the pointer, <em>not</em> any of the 
elements themselves.  </p>

<p>So now <code>a1</code> and <code>a2</code> "point" to the same place in memory, and 
if I change an element of <code>a1</code> ...</p>

<pre><code>&gt; a1[5] := 1995;

         a1[5] := 1995
</code></pre>

<p>... then the corresponding element of <code>a2</code> changes as well ...</p>

<pre><code>&gt; a2[5];

            1995
</code></pre>

<p>... because it's the <em>same</em> element! (the same location in 
memory).  I.e. once the assignment <code>a2</code> and <code>a1</code> is made,
the names are aliases for one another, and the contents 
of what superficially appear to be two separate arrays 
will <em>always be identical</em>:</p>

<pre><code>&gt; a1;

        [1949, 1951, 1955, 1959, 1995]

&gt; a2;

        [1949, 1951, 1955, 1959, 1995]
</code></pre>

<p>This <em>semantics</em> for array assignment is also seen in other 
computer languages, notably <code>Python</code>.  It means 
that <code>Array</code> operations involving element assignment are <em>much</em>
more efficient than those for <code>lists</code>, but at the same time
it introduces subtleties---like the fact that what looks like 
copying really isn't---that one must be aware of.</p>

<p>Finally, lists <em>are</em> still useful in Maple, 
particularly since we can construct them "on the fly", without
needing to call a special command. Their role in providing 
non-0 initial values for arrays is just one example of the utility
of this feature.</p>

<p><strong>END ASIDE</strong></p>

<h2><span class="contents_item"><a href="#table_of_contents_32" id="contents_item_32">
32</a>
</span>Examples of procedures that create and manipulate arrays</h2>

<p>Refer to the Homework 2 handout,  section
<em>Notation and translation of mathematical expressions that
use indexed objects into Maple</em>
for motivation for my particular 
choice of procedure and variable names in what follows.</p>

<h3><span class="contents_item"><a href="#table_of_contents_32.1" id="contents_item_32.1">
32.1</a>
</span><code>V_squares</code>: Procedure that creates and manipulates a 1D array</h3>

<p>First, we consider a 1D example.</p>

<pre><code>########################################################################
# Creates and returns a 1D array (vector) of length n whose elements 
# are the squares of the integers 1 through n.
# 
# Illustrates:
# 
# 1) Technique of declaring local variable (name) which is assigned
#    the array that is created, and which is subsequently returned,
#    in this case using an explicit return statement.
#
# 2) Basic technique of using for loop to iterate through
#    all elements of a 1D array.
# 
# Note: type posint -&gt; non-negative integer, which is the appropriate
# type for the upper bound of a range that starts from 1.
########################################################################

V_squares := proc(n::posint)

   # Define local variables for array and loop index.
   # 
   # The use of the name 'the' for something generic that one would 
   # otherwise need to invent an (arbitrary) name for is an oft-used
   # convention in computer programming.
   local V, i;

   # Create the 1D (one-dimensional) array and assign it to the local 
   # variable V. The bounds of the array are specified using a range.
   # In this case the array indexes will run from 1 to n inclusive.
   # 
   # Also note that the Array command will initialize all elements
   # to 0 by default.

   V := Array(1..n);

   # This for loop "naturally" generates all of the values of the 
   # array index that we need.
   for i from 1 to n do
      # Define the i-th element of the array to be the square of i.
      V[i] := i^2;
   end do;

   # Return the array.
   V;

end proc;
</code></pre>

<p>This procedure is defined in <code>procs2</code>, so provided you have 
previously read this file you should be able to invoke it as follows:</p>

<pre><code>&gt; V_squares(11);

          [1, 4, 9, 16, 25, 36, 49, 64, 81, 100, 121]

&gt;  V_squares(5);

                       [1, 4, 9, 16, 25]

&gt;  V_squares(11);

          [1, 4, 9, 16, 25, 36, 49, 64, 81, 100, 121]

&gt;  V_squares(1);

                              [1]

&gt;  V_squares(0);

Error, invalid input: V_squares expects its 1st argument, 
n, to be of type posint, but received 0

&gt; V_squares(-10);

Error, invalid input: V_squares expects its 1st argument, 
n, to be of type posint, but received -10

&gt;  V_squares(foo);

Error, invalid input: V_squares expects its 1st argument, 
n, to be of type posint, but received foo
</code></pre>

<h3><span class="contents_item"><a href="#table_of_contents_32.2" id="contents_item_32.2">
32.2</a>
</span><code>A_ij_sum</code>: Procedure that creates and manipulates a 2D array</h3>

<p>Here's a 2D example.</p>

<pre><code>########################################################################
# Creates and returns a 2D array (matrix) of size n_r x n_c whose
# elements satisfy
#
#    A[i, j] = i + j    for all i, j  with  i = 1 .. n_r, j = 1 .. n_c
# 
# Illustrates:
# 
# 1) Creation and assignment of 2D array.
# 
# 2) Basic technique of using NESTED for loops to iterate through
#    elements of an array.
########################################################################

A_ij_sum := proc(n_r::posint, n_c::posint)

   # Define local variables for array and the loop indexes.

   local A, i, j;

   # Create the 2D (two-dimensional) array and assign it to the local 
   # variable. The bounds of the array are specified using separate
   # ranges for the first and second dimension.
   # 
   # Again, the Array command will initialize all elements
   # to 0 by default.

   A := Array(1..n_r, 1..n_c);

   # Loop over all elements of 2D array and define elements
   # per the specification.

   for i from 1 to n_r do
      for j from 1 to n_c do
         # Define the [i,j]-th element to be i + j.
         A[i,j] := i + j;
      end do;
   end do;

   # Return the array.
   A;

end proc;
</code></pre>

<p>Try it out:</p>

<pre><code>&gt; A_ij_sum(4, 3);

                     [2    3    4]
                     [           ]
                     [3    4    5]
                     [           ]
                     [4    5    6]
                     [           ]
                     [5    6    7]

&gt; A_ij_sum(3, 4);

                  [2    3    4    5]
                  [                ]
                  [3    4    5    6]
                  [                ]
                  [4    5    6    7]


&gt; A_ij_sum(1, 3);

                          [2]
                          [ ]
                          [3]
                          [ ]
                          [4]

&gt; A_ij_sum(3, 1);

                     [2    3    4]

&gt; A_ij_sum(1, 1);

                          [2]

&gt; A_ij_sum(0, 1);

Error, invalid input: A_ij_sum expects its 1st argument, 
n, to be of type posint, but received 0

&gt; A_ij_sum(1, -1);

Error, invalid input: A_ij_sum expects its 2nd argument, 
m, to be of type posint, but received -1

&gt; A_ij_sum(foo, bar);

Error, invalid input: A_ij_sum expects its 1st argument, 
n, to be of type posint, but received foo
</code></pre>

<h2><span class="contents_item"><a href="#table_of_contents_33" id="contents_item_33">
33</a>
</span>The <code>printf</code> statement</h2>

<p>The <code>printf</code> command provides a facility to control the appearance 
of output that is "printed" in Maple; in computing parlance, this 
is known as <em>formatting</em> the output.  The command is based on 
a family of similarly-named functions in the C programming language,
so anyone familiar with C or its derivatives (C++ e.g.) or languages
whose formatting capabilities are inspired by C's (too many to 
enumerate), will be familiar with the syntax.</p>

<p>As is often the case, I will refer you to online help ...</p>

<pre><code>&gt; ?printf
</code></pre>

<p>... for instance (remember, get instant help for a command/procedure in 
Maple simply by prefacing the command name with a question mark and hitting
<code>Enter</code>), or google "maple printf examples", for full details.</p>

<p>Fortunately, for the purposes of this course (and for most Maple work
for that matter), there isn't much syntax to master.</p>

<h3><span class="contents_item"><a href="#table_of_contents_33.1" id="contents_item_33.1">
33.1</a>
</span><code>printf</code>: Syntax</h3>

<pre><code>printf(&lt;format string&gt;, &lt;arg1&gt;, &lt;arg2&gt;, ...);
</code></pre>

<h3><span class="contents_item"><a href="#table_of_contents_33.2" id="contents_item_33.2">
33.2</a>
</span><code>printf</code>: Semantics</h3>

<p>This is definitely a case where it is <em>much</em> easier to describe
how a command works through example, rather than from a formal definition.
So I will take the easy way out.</p>

<h3><span class="contents_item"><a href="#table_of_contents_33.3" id="contents_item_33.3">
33.3</a>
</span><code>printf</code>: Example usage</h3>

<p>Enter the following ...</p>

<pre><code>&gt; printf("This is an integer: %a\n", 210);

This is an integer: 210

&gt; printf("This is a float: %a\n", evalf(Pi));

This is a float: 3.141592654

&gt; printf("This is an expression: %a\n", expand((x + 1)^5));

This is an expression: x^5+5*x^4+10*x^3+10*x^2+5*x+1

&gt; printf("Here are two integers and a float: %a %a %a\n",
    2014, 1995, 33.33);

Here are two integers and a float: 2014 1995 33.33
</code></pre>

<p>You can probably guess what's going on.  </p>

<p><code>printf</code> simply echoes
its first argument, known as the <em>format string</em>, except
that every time it encounters <code>%&lt;something&gt;</code> in that string,
it converts the corresponding additional argument (starting from
the second) to a string and replaces the <code>%&lt;something&gt;</code> in the format string with that conversion.  </p>

<p>See, I told you that it wouldn't be easy translating the semantics
into English!!</p>

<p>The <code>%&lt;something&gt;</code> is called a format specification and in 
other programming languages, such as C, you generally have 
to use different format specifications for different types of 
variables that you wish to print. </p>

<p>For example, in C</p>

<pre><code>%d   -&gt;  formats an integer
%f   -&gt;  formats a float using "normal" floating point notation
%e   -&gt;  formats a float using scientific notation
%s   -&gt;  formats a string
                      .
                      .
                      .
</code></pre>

<p><strong>In Maple, the <code>%a</code> can be used to format just about everything, which 
makes life easy.</strong></p>

<p>The one other little piece of syntax is that the <code>\n</code> 
(backslash-lower-case-n) that appears 
in each of the <code>printf</code> statements that we typed generates a new line.</p>

<p>If we accidentally forget these "new line characters" then the output from 
multiple <code>printf</code>'s is likely to get "jammed together" on a single line.  </p>

<p>For example:</p>

<pre><code>&gt; printf("%a", 100); printf("%a", 200);

100200
</code></pre>

<p>(Something even stranger happens in command-line Maple!)</p>

<h3><span class="contents_item"><a href="#table_of_contents_33.4" id="contents_item_33.4">
33.4</a>
</span><code>printf</code>: Example of procedure that uses printf</h3>

<p>Here's the definition of a procedure contained in <code>printf_demo</code> that 
illustrates the utility of <code>printf</code> and the <code>%a</code> format 
specification.  </p>

<p>For the sake of presentation, I've stripped 
almost all the comments from the definition, so refer to the 
<a href="http://laplace.phas.ubc.ca/Students/phys210/maple-code/printf_demo"><strong>source file: <code>printf_demo</code></strong></a> 
to see the real deal and the 
<a href="http://laplace.phas.ubc.ca/Students/phys210/maple-code/tprintf_demo"><strong>script source file: <code>tprint_fdemo</code></strong></a> 
for the associated "testing" code.</p>

<pre><code>########################################################################
# printf_demo takes several arguments of various types and prints 
# their values using printf and the %a format specification.
########################################################################
printf_demo := proc(n::integer, x::float, z::complex, s::string,
   expr::algebraic, l::list, V::Array, A::Array)

   printf("printf_demo: In routine.\n\n");

   #---------------------------------------------------------------------
   # Print all of the arguments, one per printf statement.
   #---------------------------------------------------------------------
   printf("printf_demo: n::integer=&lt;%a&gt;\n", n);
   printf("printf_demo: x::float=&lt;%a&gt;\n", x);
   printf("printf_demo: z::complex=&lt;%a&gt;\n", z);
   printf("printf_demo: s::string=&lt;%a&gt;\n", s);
   printf("printf_demo: expr::algebraic=&lt;%a&gt;\n", expr);
   printf("printf_demo: l::list=&lt;%a&gt;\n", l);
   printf("printf_demo: V::1D array=&lt;%a&gt;\n", V);
   printf("printf_demo: A::2D array=&lt;%a&gt;\n", A);

   #---------------------------------------------------------------------
   # Print multiple arguments per printf statement.
   #---------------------------------------------------------------------
   printf("printf_demo: Some scalar values: &lt;%a&gt; &lt;%a&gt; &lt;%a&gt;\n", n, x, z);
   printf("printf_demo: The same string displayed twice: &lt;%a&gt; &lt;%a&gt;\n", s, s);
   printf("printf_demo: An expression and then a list: &lt;%a&gt; &lt;%a&gt;\n", 
      expr, l);

   #---------------------------------------------------------------------
   # Print the definition a procedure using the eval command.
   #---------------------------------------------------------------------
   printf("printf_demo: The definition of ljoin: &lt;%a&gt;\n", eval(ljoin));
end proc;
</code></pre>

<p>Here's the testing script, <code>tfprint_demo</code>, again with the commenting
stripped out:</p>

<pre><code>read printf_demo;
read procs2;

printf("Demonstrating printf_demo.\n\n");

printf_demo(666, evalf(Pi), evalc(exp(I*Pi/3)), "Greetings!", 
   (-b + sqrt(b^2 - 4*a*c)) / (2*a),
   [I, am, a, list],
   Array(1..5, [2, 3, 5, 7, 11]),
   Array(1..3, 1..3, [[1, 0, 0], [0, 1, 0], [0, 0, 1>>));
</code></pre>

<p>And here's the output from execution of the script (extra lines 
added for readability)</p>

<pre><code>&gt; read tprintf_demo;

tprintf_demo: Demonstrating printf_demo.

printf_demo: In routine.

printf_demo: n::integer=&lt;666&gt;

printf_demo: x::float=&lt;3.141592654&gt;

printf_demo: z::complex=&lt;1/2+1/2*I*3^(1/2)&gt;

printf_demo: s::string=&lt;"Greetings!"&gt;

printf_demo: expr::algebraic=&lt;1/2*(-b+(-4*a*c+b^2)^(1/2))/a&gt;

printf_demo: l::list=&lt;[I, am, a, list]&gt;

printf_demo: V::1D array=&lt;Array(1..5, [2,3,5,7,11])&gt;

printf_demo: A::2D array=&lt;Array(1..3, 1..3, [[1,0,0],[0,1,0],[0,0,1>>)&gt;

printf_demo: Some scalar values: &lt;666&gt; &lt;3.141592654&gt; &lt;1/2+1/2*I*3^(1/2)&gt;

printf_demo: The same string displayed twice: &lt;"Greetings!"&gt; &lt;"Greetings!"&gt;

printf_demo: An expression and then a list: 
    &lt;1/2*(-b+(-4*a*c+b^2)^(1/2))/a&gt; &lt;[I, am, a, list]&gt;

printf_demo: The definition of ljoin: 
    &lt;proc (l1::list, l2::list) [l1[], l2[>> end proc&gt;
</code></pre>

<h3><span class="contents_item"><a href="#table_of_contents_33.5" id="contents_item_33.5">
33.5</a>
</span><code>printf</code>: Concluding remarks</h3>

<p>Note that, fundamentally, from the point of view of being computational
scientists, where the correctness of the results that we compute is of 
paramount importance, we shouldn't spend too much time trying to make 
the output from our computer programs "look pretty".</p>

<p>Nonetheless, it should be clear to you (or become clear to you as 
you gain more experience with programming), that it is good to 
know a little bit about output formatting and because the <code>printf</code>-esque
syntax is so ubiquitous, it's worth your time to put in a little 
effort so that you can use it, if only in the straightforward manner 
demonstrated here.</p>

<h3><span class="contents_item"><a href="#table_of_contents_33.6" id="contents_item_33.6">
33.6</a>
</span><code>printf</code>: The Unix command-line version (aside!)</h3>

<p><code>printf</code> is also the name of a Unix command, as you can see by
typing the following at the bash command line:</p>

<pre><code>% which printf 
/usr/bin/printf

% man printf

PRINTF(1)  ...

NAME
       printf - format and print data

SYNOPSIS
       printf FORMAT [ARGUMENT]...
       printf OPTION
                .
                .
                .
</code></pre>

<p>Here's a sample usage (note that the \ tells the shell that the command
line continues after the Enter key is struck)</p>

<pre><code>% printf '%-12s %-12s\n' 'Line' 'words'; \
        printf '%-12s %-12s\n' 'up' 'in' ; \
        printf '%-12s\n' 'columns.'

Line         words       
up           in          
columns. 
</code></pre>

<h2><span class="contents_item"><a href="#table_of_contents_34" id="contents_item_34">
34</a>
</span>Increasing the number of array elements that Maple will display inline</h2>

<h3><span class="contents_item"><a href="#table_of_contents_34.1" id="contents_item_34.1">
34.1</a>
</span>The <code>interface</code> command</h3>

<p>We do this using the <code>rtablesize</code> of the  <code>interface</code> command.  For example,
as noted above, the default behaviour of xmaple is to suppress inline
output once there are more than 10 elements in any dimension:</p>

<pre><code>&gt; Array(1..10);

    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]

&gt; Array(1..11);

       [ 1..11 1-D Array      ]                             
       [ Data Type: anything  ]                             
       [ Storage: rectangular ]                             
       [ Order: Fortran_order ]       
</code></pre>

<p>To increase the value to 25, say, matching what command-line Maple 
does by default, we execute</p>

<pre><code>&gt; interface(rtablesize=25);

        10
</code></pre>

<p>(The value returned from interface is the previous setting of 
<code>rtablesize</code>.)</p>

<p>Now try the following:</p>

<pre><code>&gt; Array(1..11, fill=11);

    [11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11] 

&gt; Array(1..25, fill=25);

    [25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 
        25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25]

&gt; Array(1..26, fill=26);

       [ 1..26 1-D Array      ]                             
       [ Data Type: anything  ]                             
       [ Storage: rectangular ]                             
       [ Order: Fortran_order ]       
</code></pre>

<p>For the second homework, and for Problem 5 in particular, 
you may want to use this command to increase the number 
of inline-displayed elements so that you can more easily inspect
what your procedures are returning.  However, recall that within 
<code>xmaple</code> you will always be able to use the data browser to inspect
the contents of an array.</p>

<p>Also, be aware that if you set <code>rtablesize</code> to a very large value then
the maximal output that Maple will produce when evaluating an array
will be correspondingly voluminous. You may find yourself 
with a worksheet session that needs to be interrupted using the 
stop icon or even terminated with extreme prejudice using <code>xkill</code>.</p>

<p>Note, if you get help with <code>interface</code> using ...</p>

<pre><code>&gt; ?interface
</code></pre>

<p>... you will find that there are <em>many</em> features/behaviours
of Maple that can be controlled with it.</p>

<h2><span class="contents_item"><a href="#table_of_contents_35" id="contents_item_35">
35</a>
</span>The Maple initialization file: <code>~/.mapleinit</code></h2>

<p>As with many other programs and applications running under Unix/Linux
(and other OSes), Maple will read start-up commands from a special
file that is configurable by the user. </p>

<p>Under Unix/Linux, this file:</p>

<ul>
<li>Must be located in your home directory</li>
<li>Must be named <code>.mapleinit</code>, so it is a hidden file, as is
typical for startup/configuration file</li>
</ul>

<p>If this file exists, and contains a sequence of valid Maple 
commands, then any time Maple starts (both xmaple and command-line
Maple), the effect is precisely as if you executed</p>

<pre><code>&gt; read "~/.mapleinit";
</code></pre>

<p>(Note that if we want to read a file whose name or 
pathname contains any special characters, such as <code>~</code>, <code>.</code>, and <code>/</code> in 
this case, we need to enclose the name in double quotes (single 
quotes won't work).</p>

<p>Let's see how that works.</p>

<p>Exit your Maple session, <code>cd</code> to <code>~/maplepgm</code>, and start 
<code>xmaple</code> again</p>

<pre><code>% cd 
% cd maplepgm
% xmaple
</code></pre>

<p>Enter the following</p>

<pre><code>&gt; Array(1..20);

       [ 1..20 1-D Array      ]
       [ Data Type: anything  ]
       [ Storage: rectangular ]
       [ Order: Fortran_order ]
</code></pre>

<p>As is described above, Maple suppresses the display of the array 
elements since <code>rtablesize</code> is set to 10 by default.  </p>

<p>Exit the xmaple session, and within your home directory, use 
your editor to create the file <code>.mapleinit</code></p>

<pre><code>% cd
% kate .mapleinit &amp;
</code></pre>

<p>or </p>

<pre><code>% cd 
% gedit .mapleinit &amp;
</code></pre>

<p>or other, should you be using a different text editor.</p>

<p><em>Again, be sure that this file is created/saved in your home
directory, or Maple won't find it.</em></p>

<p>Enter the following line in the file</p>

<pre><code>interface(rtablesize=100):
</code></pre>

<p>and save the file, but <em>do not quit your editor session yet!</em></p>

<p><em>Make sure that you end the line with a colon, <strong>not a semi-colon</strong>,
or every time you start Maple a <code>10</code> will appear in your worksheet
since the <code>interface</code> command will echo what the old value of</em>
<code>rtablesize</code> <em>was.</em></p>

<p>Now, start a new xmaple session (it doesn't matter what the 
working directory is) and type </p>

<pre><code>&gt; Array(1..20);

     [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
</code></pre>

<p>So now you have customized Maple so that, by default, it will 
display up to 100 elements along any and every dimension of 
an array.</p>

<p>I recommend that you leave your <code>~/.mapleinit</code> file this way 
since, as noted elsewhere in the notes and in the homework
handout, it may be useful to be able to display more than 10 elements
of an array while you are developing your code.</p>

<p><strong>NOTE</strong> </p>

<p>If the above example isn't working for you, then you haven't 
created <code>~/.mapleinit</code> properly, so ask for help.</p>

<p>Once you've verified that it <em>is</em> working, you can safely exit 
the editing session that you used to create the startup file.</p>

<p><strong>FINAL NOTE</strong></p>

<p>Again, the startup file can contain <em>any</em> sequence of valid 
Maple commands, so if you happen to find that there's some 
setting that you often make, or some packages that you often
use that aren't loaded into Maple by default, put the 
corresponding commands into your <code>~/.mapleinit</code>, always 
being careful to back up the file before you begin editing 
it.</p>

<h2><span class="contents_item"><a href="#table_of_contents_36" id="contents_item_36">
36</a>
</span>Introduction to Maple's plotting facilities</h2>

<p>Maple has powerful plotting capabilities, both for 2D (x-y) and 
3D (x-y-z) plots, and three of the problems on the current homework
require you to make use of these.</p>

<p>As with <code>gnuplot</code>, I will ask that you invest some time and 
effort in learning about Maple's plotting facilities---the homework
should provide some prodding in this regard.</p>

<p>Will only take a brief look at 2D plots here, use the online help 
facility via</p>

<pre><code>&gt; ?plot
</code></pre>

<p>and </p>

<pre><code>&gt; ?plot/options
</code></pre>

<p>for full details on making 2D plots. </p>

<p>You might also be interested
in making 3D plots.  See </p>

<pre><code>&gt; ?plot3d 
</code></pre>

<p>for more details</p>

<p>The most useful <em>basic</em> forms for us are ..</p>

<p><strong>Form 1</strong></p>

<pre><code>plot( f, x = x0..x1 );

where

f         -&gt;   expression in independent variable x
x         -&gt;   independent variable
x0 .. x1  -&gt;   range of plot
    x0    -&gt;   left endpoint of range
    x1    -&gt;   right endpoint of range
</code></pre>

<p><strong>Form 2</strong></p>

<pre><code>plot( [ f1, f2, ..., fn ],  x = x0..x1 );

where

[f1, ..., fn]  -&gt;   list of expressions in independent variable x
x              -&gt;   independent variable
x0 .. x1       -&gt;   range of plot
    x0         -&gt;   left endpoint of range
    x1         -&gt;   right endpoint of range
</code></pre>

<p>This type of invocation will produce a <em>single</em> plot; i.e. the 
<code>n</code> expressions <code>f1(x), f2(x), ... f(n)</code> will be graphed 
simultaneously.</p>

<p>Try the following:</p>

<pre><code>&gt; plot( 6*sin(2*x)*sin(3*x) - 1, x = 0 .. 4 );

&gt; plot( [sin(x), cos(x), tan(x) ], x = -2*Pi .. 2*Pi );
</code></pre>

<p>Try some examples of your own, here or on your own time.</p>

<p><strong>NOTE</strong></p>

<p>Maple can also be used to plot numeric data that is defined in a file.
However, <code>gnuplot</code> and <code>Matlab</code> are both designed to make that 
task very straightforward, so one of those is generally a better 
option.</p>

<p>Finally, I'll leave you with a couple of optional out-of-lab exercises 
that will provide additional practice in writing procedures, and 
which may serve as good warm-ups for the homework.</p>

<h3><span class="contents_item"><a href="#table_of_contents_36.1" id="contents_item_36.1">
36.1</a>
</span>EXERCISE: <code>lprod</code></h3>

<p>Create two Maple source files</p>

<pre><code>~/maplepgm/tmyprocs4  -&gt; contains testing code for lprod
~/maplepgm/myprocs4   -&gt; contains definition of lprod
</code></pre>

<p><code>lprod</code> is defined as follows</p>

<pre><code>Procedure: 

    `lprod`:

Header: 

    lprod := proc(l1::list(algebraic), l2::list(algebraic))

Function: 

    Returns a list whose elements are the products of the 
    corresponding elements of the arguments `l1` and `l2`,
    both of which are lists.

Error checking

    Uses the error statement to exit with the message 

        Input lists l1 and l2 are not of equal length

    if the input lists are not of the same length.

Sample invocations and output.

    &gt; lprod( [2, 4, 6], [3, 4, 9] );

          [6, 16, 54];

    &gt; lprod( [2, 4, 6], [3, 4] );   

      Error, (in lprod) Input lists l1 and l2 are not of equal length

    &gt; lprod( [], [] ); 

              []
</code></pre>

<p><strong>NOTE</strong></p>

<ol>
<li><p>It's best if you start your coding from scratch, 
rather than copying/modifying <code>ladd</code></p></li>
<li><p>As usual, start with the test script file, <code>tmyprocs4</code>, and try to 
use enough logically distinct invocations of <code>lprod</code> to test 
your implementation thoroughly.</p></li>
<li><p>As usual, make sure that the first command in your test script 
reads the procedure definition file, i.e.</p>

<pre><code>&gt; read myprocs4;
</code></pre></li>
</ol>

<h3><span class="contents_item"><a href="#table_of_contents_36.2" id="contents_item_36.2">
36.2</a>
</span>EXERCISE (Out of lab): <code>myplot3</code></h3>

<p>In <code>~/maplepgm/myprocs4</code> add a definition  for a procedure 
<code>myplot3</code>:</p>

<pre><code>Procedure:

    myplot3

Header: 

    myplot3 := proc(f::procedure, x::name, xmin::algebraic, xmax::algebraic)

Function: 

    Makes a single plot of f(x) and its first two derivatives 
    (i.e. three curves on the same graph) on the domain xmin .. xmax.

Sample invocation:

    myplot3(x -&gt; cos(2*x), 'x', 0, 3*Pi);
</code></pre>

<p><strong>NOTE</strong></p>

<p>Observe that first argument to <code>myplot3</code> must be something of type <code>procedure</code>
and that an expression such as <code>cos(2*x)</code> is <em>not</em> of that type:</p>

<pre><code>type(cos(2*x), procedure);

        false
</code></pre>

<p>but <code>x -&gt; cos(2*x)</code> <em>is</em></p>

<pre><code>type(x -&gt; cos(2*x), procedure);

        true
</code></pre>

<p>So, if you solve this problem correctly</p>

<pre><code>myplot3(cos(2*x), x, -Pi, 2*Pi);
</code></pre>

<p>will <em>not</em> work, but should return the error message </p>

<pre><code>Error, invalid input: myplot3 expects its 1st argument, f, to be of type
procedure, but received cos(2*x)
</code></pre>

<p>However, if you define a procedure <code>mycos2x</code> as follows:</p>

<pre><code>mycos2x := proc(x) cos(2*x) end proc;
</code></pre>

<p>then </p>

<pre><code>&gt; myplot3(mycos2x, x, -Pi, 2*Pi);
</code></pre>

<p><em>should</em> do the job.</p>

<p>Also note that </p>

<pre><code>&gt; myplot3(mycos2x, y, -Pi, 2*Pi);
</code></pre>

<p>should produce an identical plot, except that the horizontal 
axis will be labelled <code>y</code> rather than <code>x</code>;
i.e. there's no need to pass the name <code>x</code> to the procedure, any 
(unassigned) name will do.</p>
</body>
</html>
